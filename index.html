<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Seismo-Wake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="Seismo-Wake ‚Äî –ø—Ä–æ—Å—Ç–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–π —Ä—è–¥–æ–º —Å –≤–∞–º–∏: –≥–¥–µ, –∫–∞–∫ –¥–∞–ª–µ–∫–æ –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ —Ç—Ä—è—Ö–Ω—É–ª–æ." />

  <style>
    :root {
      --bg: #0f172a;
      --bg-card: #0b1220;
      --bg-elevated: #020617;
      --border-soft: #1e293b;
      --accent: #3b82f6;
      --accent-soft: #1d4ed8;
      --accent-soft-bg: #0b1120;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --danger: #ef4444;
      --warning: #f59e0b;
      --safe: #22c55e;
      --card-radius: 14px;
      --shadow-soft: 0 12px 30px rgba(15,23,42,0.6);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 50%, #000 100%);
      color: var(--text-main);
    }

    .app {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px 12px 40px;
    }

    @media (min-width: 768px) {
      .app {
        padding: 24px 16px 48px;
      }
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .app-title {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title span.logo-dot {
      display: inline-flex;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #f97316 0, #dc2626 40%, #7f1d1d 100%);
      box-shadow: 0 0 24px rgba(248,113,113,0.8);
    }

    .tagline {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 640px;
    }

    .lang-switcher {
      display: flex;
      gap: 4px;
    }

    .lang-btn {
      border: 1px solid transparent;
      background: transparent;
      color: var(--text-soft);
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      cursor: pointer;
      transition: 0.15s ease;
    }

    .lang-btn.active {
      background: rgba(59,130,246,0.16);
      border-color: rgba(59,130,246,0.9);
      color: #e5f0ff;
      font-weight: 600;
    }

    .lang-btn:hover {
      border-color: rgba(148,163,184,0.5);
    }

    .top-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 4px 0 12px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: radial-gradient(circle at 0 0, rgba(59,130,246,0.15), rgba(15,23,42,0.95));
      padding: 7px 12px;
      font-size: 13px;
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(15,23,42,0.5);
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease, border-color 0.15s ease;
      white-space: nowrap;
    }

    .btn-primary {
      border-color: var(--accent);
      background: linear-gradient(135deg, #1d4ed8, #1e40af);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(15,23,42,0.6);
      border-color: rgba(248,250,252,0.18);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 5px 14px rgba(15,23,42,0.7);
    }

    .btn-icon {
      font-size: 14px;
    }

    .update-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    .spinner {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 2px solid rgba(148,163,184,0.3);
      border-top-color: #e5e7eb;
      animation: spin 1s linear infinite;
      display: none;
    }

    .spinner.visible {
      display: inline-block;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .source-label {
      font-size: 11px;
      color: var(--text-soft);
      margin-left: auto;
      opacity: 0.8;
    }

    .region-card {
      background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);
      border-radius: var(--card-radius);
      border: 1px solid rgba(148,163,184,0.4);
      padding: 12px 12px 10px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 12px;
    }

    .region-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
      margin-bottom: 6px;
    }

    .region-label {
      font-size: 13px;
      color: var(--text-soft);
    }

    .region-current {
      font-size: 13px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .region-input-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
    }

    .region-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.75);
      padding: 7px 11px;
      background: rgba(15,23,42,0.96);
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(15,23,42,0.7);
    }

    .region-input-row input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(59,130,246,0.7);
    }

    .region-input-row .btn-geo {
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: radial-gradient(circle at 0 0, rgba(16,185,129,0.2), rgba(15,23,42,0.98));
      color: #bbf7d0;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .region-hint {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    .cities-error {
      margin-top: 6px;
      font-size: 11px;
      color: #fecaca;
    }

    .cities-error a {
      color: #bfdbfe;
      text-decoration: underline;
      cursor: pointer;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .cards-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (min-width: 880px) {
      .cards-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
        gap: 10px;
        align-items: flex-start;
      }
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--card-radius);
      border: 1px solid rgba(30,64,175,0.7);
      padding: 10px 11px;
      box-shadow: var(--shadow-soft);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 4px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-soft);
    }

    .events-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
    }

    .event-item {
      padding: 7px 9px;
      border-radius: 10px;
      background: radial-gradient(circle at top, #020617 0, #020617 45%, #01030a 100%);
      border: 1px solid rgba(30,64,175,0.7);
      position: relative;
      overflow: hidden;
    }

    .event-item::before {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0.16;
      pointer-events: none;
    }

    .event-row-main {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .event-timeago {
      font-weight: 500;
    }

    .event-mag {
      font-weight: 600;
      font-size: 12px;
      white-space: nowrap;
    }

    .event-row-secondary {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 1px;
    }

    .event-row-place {
      font-size: 11px;
      color: #c4c9d4;
    }

    .event-source {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 2px;
      opacity: 0.75;
    }

    .severity-low {
      border-color: rgba(34,197,94,0.8);
    }

    .severity-low::before {
      background: radial-gradient(circle at 0 0, rgba(22,163,74,0.35), transparent 55%);
    }

    .severity-mid {
      border-color: rgba(245,158,11,0.9);
    }

    .severity-mid::before {
      background: radial-gradient(circle at 0 0, rgba(245,158,11,0.35), transparent 55%);
    }

    .severity-high {
      border-color: rgba(239,68,68,0.95);
    }

    .severity-high::before {
      background: radial-gradient(circle at 0 0, rgba(248,113,113,0.45), transparent 60%);
    }

    .severity-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-weight: 600;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .severity-high .severity-label {
      color: #fecaca;
    }

    .severity-mid .severity-label {
      color: #fef3c7;
    }

    .severity-low .severity-label {
      color: #bbf7d0;
    }

    .empty-text {
      font-size: 11px;
      color: var(--text-soft);
    }

    .card-safety-body {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 6px;
    }

    .btn-inline {
      display: inline-flex;
      margin-top: 2px;
      font-size: 12px;
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: radial-gradient(circle at 0 0, rgba(56,189,248,0.15), rgba(15,23,42,0.95));
      color: #e0f2fe;
      cursor: pointer;
      gap: 4px;
      align-items: center;
    }

    .world-label {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    footer {
      margin-top: 14px;
      font-size: 11px;
      color: var(--text-soft);
      border-top: 1px solid rgba(30,64,175,0.7);
      padding-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: space-between;
      align-items: baseline;
    }

    footer a {
      color: #bfdbfe;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 11px;
    }

    .footer-links a {
      text-decoration: underline;
    }

    /* –ú–æ–¥–∞–ª–∫–∏ */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.8);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 12px;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      max-width: 640px;
      width: 100%;
      max-height: 90vh;
      overflow: auto;
      background: #020617;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.7);
      box-shadow: 0 22px 60px rgba(0,0,0,0.8);
      padding: 14px 14px 12px;
      font-size: 13px;
      color: #e5e7eb;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
    }

    .modal-title {
      font-weight: 600;
      font-size: 15px;
    }

    .modal-close {
      border: none;
      background: transparent;
      color: var(--text-soft);
      cursor: pointer;
      font-size: 16px;
      line-height: 1;
    }

    .modal-section-title {
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 3px;
      font-size: 13px;
    }

    .modal p {
      margin: 2px 0 4px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .modal ul {
      margin: 4px 0 6px 18px;
      padding: 0;
      font-size: 12px;
      color: var(--text-soft);
    }

    .modal ul li {
      margin-bottom: 3px;
    }

    .donate-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .donate-btn {
      border-radius: 999px;
      padding: 7px 11px;
      border: 1px solid rgba(148,163,184,0.7);
      background: radial-gradient(circle at 0 0, rgba(34,197,94,0.18), rgba(15,23,42,0.96));
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: #dcfce7;
      cursor: pointer;
      text-decoration: none;
    }

    .donate-btn.secondary {
      background: radial-gradient(circle at 0 0, rgba(59,130,246,0.2), rgba(15,23,42,0.96));
      color: #dbeafe;
    }

    .donate-note {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    .warning-banner {
      background: radial-gradient(circle at 0 0, rgba(239,68,68,0.3), rgba(88,28,135,0.6));
      border-radius: 12px;
      border: 1px solid rgba(239,68,68,0.9);
      padding: 7px 9px;
      margin-bottom: 8px;
      font-size: 12px;
      color: #fee2e2;
    }

    .warning-banner strong {
      display: block;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="header-top">
        <div class="app-title">
          <span class="logo-dot"></span>
          <span data-i18n="app_title">Seismo-Wake</span>
        </div>
        <div class="lang-switcher">
          <button class="lang-btn active" data-lang="ru">RU</button>
          <button class="lang-btn" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="kz">KZ</button>
          <button class="lang-btn" data-lang="fr">FR</button>
        </div>
      </div>
      <div class="tagline" data-i18n="tagline">
        –†–∞–Ω–Ω–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –≥–¥–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –±—ã–ª–∏ —Ç–æ–ª—á–∫–∏ —Ä—è–¥–æ–º —Å –≤–∞–º–∏.
      </div>

      <div class="top-buttons">
        <button id="btnRefresh" class="btn btn-primary">
          <span class="btn-icon">‚ö°</span>
          <span data-i18n="btn_refresh">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</span>
        </button>

        <button id="btnInstall" class="btn">
          <span class="btn-icon">‚¨áÔ∏è</span>
          <span data-i18n="btn_install">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</span>
        </button>

        <button id="btnDonate" class="btn">
          <span class="btn-icon">‚ù§Ô∏è</span>
          <span data-i18n="btn_donate">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
        </button>

        <button id="btnHow" class="btn">
          <span class="btn-icon">‚ùì</span>
          <span data-i18n="btn_how">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
        </button>
      </div>

      <div class="update-row">
        <div id="spinner" class="spinner"></div>
        <div id="updateText" data-i18n="updated_initial">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–æ—Å—å</div>
        <div class="source-label" id="sourceLabel">
          USGS ¬∑ all_day + all_week
        </div>
      </div>
    </header>

    <section class="region-card">
      <div class="warning-banner hidden" id="warningBanner">
        <strong id="warningTitle">–°–∏–ª—å–Ω–æ–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏!</strong>
        <span id="warningText">
          –ï—Å–ª–∏ –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –∑–∞–º–µ—Ç–Ω—ã–µ —Ç–æ–ª—á–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –æ—Ü–µ–Ω–∏—Ç–µ –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–∞–º—è—Ç–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∏–∂–µ.
        </span>
      </div>

      <div class="region-header">
        <div>
          <div class="region-label" data-i18n="region_label">–í–∞—à —Ä–µ–≥–∏–æ–Ω:</div>
          <div class="region-current" id="currentRegion">Almaty (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</div>
        </div>
      </div>

      <div class="region-input-row">
        <input id="cityInput" list="citiesList" autocomplete="off" data-i18n="location_placeholder"
               placeholder="–ì–æ—Ä–æ–¥ –∏–ª–∏ —Ä–µ–≥–∏–æ–Ω (Almaty, Astana, Urumqi‚Ä¶)" />
        <datalist id="citiesList"></datalist>
        <button id="btnGeo" class="btn-geo">
          <span class="btn-icon">üìç</span>
          <span data-i18n="btn_use_geo">–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</span>
        </button>
      </div>

      <div class="region-hint" data-i18n="city_hint">
        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ —Å—Ç–æ–ª–∏—Ü—ã. –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.
      </div>

      <div class="cities-error hidden" id="citiesError">
        <span data-i18n="cities_error_text">
          –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤.
        </span>
        <a href="https://zhanat-arch.github.io/Seismo-Wake/" target="_blank" rel="noopener noreferrer" data-i18n="cities_error_link">
          –û—Ç–∫—Ä—ã—Ç—å –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é
        </a>
      </div>
    </section>

    <main>
      <div class="cards-grid">
        <section class="card" id="cardLastSignificant">
          <div class="card-header">
            <div class="card-title" data-i18n="card_last_significant">
              –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–∏–º–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
            </div>
          </div>
          <div id="lastSignificantContainer">
            <div class="empty-text" data-i18n="no_last_significant">
              –†—è–¥–æ–º –ø–æ–∫–∞ –Ω–µ –±—ã–ª–æ –∑–Ω–∞—á–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏–π.
            </div>
          </div>
        </section>

        <section class="card">
          <div class="card-header">
            <div class="card-title" data-i18n="card_world_strong">–°–∏–ª—å–Ω—ã–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è –≤ –º–∏—Ä–µ (24 —á–∞—Å–∞)</div>
          </div>
          <div id="worldStrongContainer" class="events-list">
            <div class="empty-text" data-i18n="no_world_strong">
              –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å–∏–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (M5.5+) –ø–æ –¥–∞–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
            </div>
          </div>
          <div class="world-label" data-i18n="world_label_hint">
            –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–ø–∞–≤—à–∏–µ –≤ —Å–≤–æ–¥–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
          </div>
        </section>

        <section class="card">
          <div class="card-header">
            <div class="card-title" data-i18n="card_near_hour">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</div>
          </div>
          <div id="nearHourContainer" class="events-list">
            <div class="empty-text" data-i18n="no_hour_events">
              –ù–µ—Ç —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.
            </div>
          </div>
        </section>

        <section class="card">
          <div class="card-header">
            <div class="card-title" data-i18n="card_near_day">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</div>
          </div>
          <div id="nearDayContainer" class="events-list">
            <div class="empty-text" data-i18n="no_day_events">
              –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.
            </div>
          </div>
        </section>

        <section class="card">
          <div class="card-header">
            <div class="card-title" data-i18n="card_near_week">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</div>
          </div>
          <div id="nearWeekContainer" class="events-list">
            <div class="empty-text" data-i18n="no_week_events">
              –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.
            </div>
          </div>
        </section>

        <section class="card">
          <div class="card-header">
            <div class="card-title" data-i18n="card_safety_title">üìã –ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</div>
          </div>
          <div class="card-safety-body" data-i18n="card_safety_body">
            –ö—Ä–∞—Ç–∫–æ –æ —Ç–æ–º, –∫–∞–∫ –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø—Ä–∏ –æ—â—É—Ç–∏–º—ã—Ö —Ç–æ–ª—á–∫–∞—Ö. –≠—Ç–∏ —Å–æ–≤–µ—Ç—ã –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–æ –ø–æ–º–æ–≥–∞—é—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –∑–¥—Ä–∞–≤—ã–π —Å–º—ã—Å–ª.
          </div>
          <button id="btnSafety" class="btn-inline">
            <span class="btn-icon">üìò</span>
            <span data-i18n="btn_safety_main">
              –ö–∞–∫ —Å–µ–±—è –≤–µ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏
            </span>
          </button>
        </section>
      </div>
    </main>

    <footer>
      <div data-i18n="footer_text">
        –í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
      </div>
      <div class="footer-links">
        <a href="https://github.com/zhanat-arch/Seismo-Wake" target="_blank" rel="noopener noreferrer">
          GitHub: Seismo-Wake
        </a>
        <a href="https://github.com/zhanat-arch" target="_blank" rel="noopener noreferrer" data-i18n="footer_dev_profile">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
        </a>
      </div>
    </footer>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞: –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç -->
  <div class="modal-backdrop" id="modalHow">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" data-i18n="modal_how_title">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Seismo-Wake</div>
        <button class="modal-close" data-close-modal="modalHow">‚úï</button>
      </div>
      <div class="modal-content">
        <p data-i18n="modal_how_intro">
          Seismo-Wake ‚Äî —ç—Ç–æ –ª—ë–≥–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –æ—Ç –≤–∞—Å –±—ã–ª–∏ –Ω–µ–¥–∞–≤–Ω–∏–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è.
        </p>

        <div class="modal-section-title" data-i18n="modal_how_section1_title">1. –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ</div>
        <p data-i18n="modal_how_section1_text">
          –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Å–µ–π—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, USGS) –≤ —Ñ–æ—Ä–º–∞—Ç–µ GeoJSON –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –∏ –Ω–µ–¥–µ–ª—é.
          –°–æ–±—ã—Ç–∏—è —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Å, —Å—É—Ç–∫–∏, –Ω–µ–¥–µ–ª—è) –∏ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞.
        </p>

        <div class="modal-section-title" data-i18n="modal_how_section2_title">2. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è ¬´–ø–æ–±–ª–∏–∑–æ—Å—Ç–∏¬ª</div>
        <p data-i18n="modal_how_section2_text">
          –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—Å—ë, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Ç–µ–Ω –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
          –∏–ª–∏ –æ—Ç –≤–∞—à–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏). –¢–æ—á–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.
        </p>

        <div class="modal-section-title" data-i18n="modal_how_section3_title">3. –ü–æ—á–µ–º—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ</div>
        <p data-i18n="modal_how_section3_text">
          Seismo-Wake —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –±—Ä–∞—É–∑–µ—Ä–∞. –ö–æ–≥–¥–∞ –≤—ã —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –≤–∫–ª–∞–¥–∫—É –∏–ª–∏ –≥–∞—Å–∏—Ç–µ —ç–∫—Ä–∞–Ω, Android/iOS –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–æ–≤,
          –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –≤ —Ñ–æ–Ω–µ –∏ –ø–æ–¥–∞–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
          –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –ü–æ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –æ–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
        </p>

        <div class="modal-section-title" data-i18n="modal_how_section4_title">4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA)</div>
        <p data-i18n="modal_how_section4_text">
          Seismo-Wake –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA): –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é, –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ ¬´–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ
          –∏ –¥–æ–±–∞–≤—å—Ç–µ Seismo-Wake –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω. –ó–∞–ø—É—Å–∫ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ, –±–µ–∑ –ª–∏—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞.
        </p>

        <p data-i18n="modal_how_section5_text">
          –ó–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –Ω–∞ GitHub:
        </p>
        <p>
          <a href="https://github.com/zhanat-arch/Seismo-Wake" target="_blank" rel="noopener noreferrer">
            github.com/zhanat-arch/Seismo-Wake
          </a>
        </p>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞: –ü–∞–º—è—Ç–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
  <div class="modal-backdrop" id="modalSafety">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" data-i18n="modal_safety_title">–ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏</div>
        <button class="modal-close" data-close-modal="modalSafety">‚úï</button>
      </div>
      <div class="modal-content">
        <p data-i18n="modal_safety_disclaimer">
          –≠—Ç–∏ —Å–æ–≤–µ—Ç—ã –Ω–æ—Å—è—Ç –æ–±—â–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ú–ß–° –∏ –º–µ—Å—Ç–Ω—ã—Ö —Å–ª—É–∂–±. –í—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–π—Ç–µ —É–∫–∞–∑–∞–Ω–∏—è–º –≤–ª–∞—Å—Ç–µ–π –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –≤–æ–∫—Ä—É–≥ –≤–∞—Å.
        </p>

        <div class="modal-section-title" data-i18n="modal_safety_now_title">–ï—Å–ª–∏ —Ç–æ–ª—á–∫–∏ —É–∂–µ –Ω–∞—á–∞–ª–∏—Å—å</div>
        <ul>
          <li data-i18n="modal_safety_now_1">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –æ—Ü–µ–Ω–∏—Ç–µ –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É –≤–æ–∫—Ä—É–≥ –∏ –∏–∑–±–µ–≥–∞–π—Ç–µ –ø–∞–Ω–∏–∫–∏.</li>
          <li data-i18n="modal_safety_now_2">–ï—Å–ª–∏ –≤—ã –≤ –¥–æ–º–µ ‚Äî –æ—Ç–æ–π–¥–∏—Ç–µ –æ—Ç —Å—Ç–µ–∫–ª–∞ –∏ —Ç—è–∂—ë–ª–æ–π –º–µ–±–µ–ª–∏, –Ω–µ —Å—Ç–æ–π—Ç–µ –ø–æ–¥ –ª—é—Å—Ç—Ä–∞–º–∏ –∏ –ø–æ–ª–∫–∞–º–∏.</li>
          <li data-i18n="modal_safety_now_3">–ï—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –≤ –¥–æ–º–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–∏–≥–µ–ª–∏ –∏–ª–∏ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–µ–Ω—ã ‚Äî —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –±—ã—Ç—å —Ä—è–¥–æ–º —Å –Ω–∏–º–∏, –Ω–æ –Ω–µ –ø–æ–¥ –Ω–∞–≤–∏—Å–∞—é—â–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏.</li>
          <li data-i18n="modal_safety_now_4">–ù–µ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ª–∏—Ñ—Ç–æ–º, –Ω–µ –≤—ã–±–µ–≥–∞–π—Ç–µ –≤ –ø–∞–Ω–∏–∫–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ –≤–æ –≤—Ä–µ–º—è —Å–∏–ª—å–Ω—ã—Ö —Ç–æ–ª—á–∫–æ–≤.</li>
        </ul>

        <div class="modal-section-title" data-i18n="modal_safety_after_title">–ü–æ—Å–ª–µ –æ—â—É—Ç–∏–º—ã—Ö —Ç–æ–ª—á–∫–æ–≤</div>
        <ul>
          <li data-i18n="modal_safety_after_1">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª—é–¥–µ–π —Ä—è–¥–æ–º. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é –∏–ª–∏ —Å–ª—É–∂–±—É —Å–ø–∞—Å–µ–Ω–∏—è.</li>
          <li data-i18n="modal_safety_after_2">–û—Ü–µ–Ω–∏—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏–µ: –µ—Å—Ç—å –ª–∏ —Ç—Ä–µ—â–∏–Ω—ã, –æ–±—Ä—É—à–µ–Ω–∏—è, –∑–∞–ø–∞—Ö –≥–∞–∑–∞, –∑–∞–¥—ã–º–ª–µ–Ω–∏–µ. –ü—Ä–∏ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è—Ö –ª—É—á—à–µ –ø–æ–∫–∏–Ω—É—Ç—å –∑–¥–∞–Ω–∏–µ.</li>
          <li data-i18n="modal_safety_after_3">–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –∞—Ñ—Ç–µ—Ä—à–æ–∫–∞–º ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —Ç–æ–ª—á–∫–∞–º –º–µ–Ω—å—à–µ–π —Å–∏–ª—ã. –û–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–æ–≤ –∏ –¥–Ω–µ–π.</li>
        </ul>

        <div class="modal-section-title" data-i18n="modal_safety_app_title">–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Seismo-Wake –ø–æ—Å–ª–µ —Ç–æ–ª—á–∫–∞</div>
        <ul>
          <li data-i18n="modal_safety_app_1">–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –±—ã–ª–æ –ª–∏ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–æ —Å–∏–ª—å–Ω–æ–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –æ—Ç –≤–∞—Å.</li>
          <li data-i18n="modal_safety_app_2">–ü–æ–º–Ω–∏—Ç–µ: –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ –¥–∞–ª–µ–∫–æ, –ª–æ–∫–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–∫–∞—á–µ—Å—Ç–≤–æ –∑–¥–∞–Ω–∏—è, —ç—Ç–∞–∂, –≥—Ä—É–Ω—Ç) –º–æ–≥—É—Ç —É—Å–∏–ª–∏–≤–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ.</li>
          <li data-i18n="modal_safety_app_3">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ Seismo-Wake –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∞ –Ω–µ –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ—à–µ–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞—Ç—å.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞: –î–æ–Ω–∞—Ç -->
  <div class="modal-backdrop" id="modalDonate">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" data-i18n="modal_donate_title">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</div>
        <button class="modal-close" data-close-modal="modalDonate">‚úï</button>
      </div>
      <div class="modal-content">
        <p data-i18n="modal_donate_text">
          –í–∞—à –¥–æ–Ω–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å Seismo-Wake –∏ –¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å:
        </p>

        <div class="donate-buttons">
          <a class="donate-btn" href="https://boosty.to/zhanat-arch" target="_blank" rel="noopener noreferrer">
            <span>üí≥</span>
            <span data-i18n="modal_donate_boosty_btn">
              –î–æ–Ω–∞—Ç –∫–∞—Ä—Ç–æ–π (Boosty)
            </span>
          </a>
          <a class="donate-btn secondary" href="https://ko-fi.com/zhanat_arch" target="_blank" rel="noopener noreferrer">
            <span>‚òï</span>
            <span data-i18n="modal_donate_kofi_btn">
              Donat / PayPal / card (Ko-fi)
            </span>
          </a>
        </div>

        <p class="donate-note" data-i18n="modal_donate_thanks">
          –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É: –¥–∞–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–π –≤–∑–Ω–æ—Å –º–æ–∂–µ—Ç –æ–¥–Ω–∞–∂–¥—ã –ø–æ–º–æ—á—å —Å–ø–∞—Å—Ç–∏ —á—å—é-—Ç–æ –∂–∏–∑–Ω—å, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –≤–æ–≤—Ä–µ–º—è –ø–æ–¥—Å–∫–∞–∂–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ.
        </p>
      </div>
    </div>
  </div>

  <script>
    // -------------------------
    // –ë–ê–ó–û–í–´–ï –ü–ï–†–ï–í–û–î–´ (RU + EN)
    // -------------------------

    const baseTranslations = {
      ru: {
        app_title: "Seismo-Wake",
        tagline: "–†–∞–Ω–Ω–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –≥–¥–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –±—ã–ª–∏ —Ç–æ–ª—á–∫–∏ —Ä—è–¥–æ–º —Å –≤–∞–º–∏.",
        btn_refresh: "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
        btn_install: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
        btn_donate: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
        btn_how: "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",
        region_label: "–í–∞—à —Ä–µ–≥–∏–æ–Ω:",
        location_placeholder: "–ì–æ—Ä–æ–¥ –∏–ª–∏ —Ä–µ–≥–∏–æ–Ω (Almaty, Astana, Urumqi‚Ä¶)",
        btn_use_geo: "–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
        city_hint: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ —Å—Ç–æ–ª–∏—Ü—ã. –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.",
        cities_error_text: "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤.",
        cities_error_link: "–û—Ç–∫—Ä—ã—Ç—å –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é",
        card_last_significant: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–∏–º–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        card_near_hour: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        card_near_day: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        card_near_week: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        card_world_strong: "–°–∏–ª—å–Ω—ã–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è –≤ –º–∏—Ä–µ (24 —á–∞—Å–∞)",
        card_safety_title: "üìã –ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        card_safety_body: "–ö—Ä–∞—Ç–∫–æ –æ —Ç–æ–º, –∫–∞–∫ –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø—Ä–∏ –æ—â—É—Ç–∏–º—ã—Ö —Ç–æ–ª—á–∫–∞—Ö. –≠—Ç–∏ —Å–æ–≤–µ—Ç—ã –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–æ –ø–æ–º–æ–≥–∞—é—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –∑–¥—Ä–∞–≤—ã–π —Å–º—ã—Å–ª.",
        btn_safety_main: "–ö–∞–∫ —Å–µ–±—è –≤–µ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏",
        no_last_significant: "–†—è–¥–æ–º –ø–æ–∫–∞ –Ω–µ –±—ã–ª–æ –∑–Ω–∞—á–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏–π.",
        no_hour_events: "–ù–µ—Ç —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.",
        no_day_events: "–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.",
        no_week_events: "–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.",
        no_world_strong: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å–∏–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (M5.5+) –ø–æ –¥–∞–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞.",
        world_label_hint: "–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–ø–∞–≤—à–∏–µ –≤ —Å–≤–æ–¥–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞.",
        footer_text: "–í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.",
        footer_dev_profile: "–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞",

        updated_initial: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–æ—Å—å",
        updated_just_now: "–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ",
        updated_seconds: "–û–±–Ω–æ–≤–ª–µ–Ω–æ: {n} —Å–µ–∫ –Ω–∞–∑–∞–¥",
        updated_minutes: "–û–±–Ω–æ–≤–ª–µ–Ω–æ: {n} –º–∏–Ω –Ω–∞–∑–∞–¥",
        updated_hours: "–û–±–Ω–æ–≤–ª–µ–Ω–æ: {n} —á –Ω–∞–∑–∞–¥",
        updated_date: "–û–±–Ω–æ–≤–ª–µ–Ω–æ: {date}",

        warning_title_danger: "–°–∏–ª—å–Ω–æ–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏!",
        warning_text_danger: "–ï—Å–ª–∏ –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ —Å–∏–ª—å–Ω—ã–µ —Ç–æ–ª—á–∫–∏, –æ—Ü–µ–Ω–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–∞–Ω–∏—è –∏ –ª—é–¥–µ–π –≤–æ–∫—Ä—É–≥, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∫–∏–Ω—å—Ç–µ –æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –∏ —Å–ª–µ–¥—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏—è–º —Å–ª—É–∂–±.",
        warning_title_noticeable: "–í–æ–∑–º–æ–∂–Ω—ã –æ—â—É—Ç–∏–º—ã–µ —Ç–æ–ª—á–∫–∏ –≤ —Ä–µ–≥–∏–æ–Ω–µ.",
        warning_text_noticeable: "–î–∞–∂–µ —É–º–µ—Ä–µ–Ω–Ω–æ–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ—â—É—â–∞—Ç—å—Å—è —Å–∏–ª—å–Ω–µ–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–∏—Ö —ç—Ç–∞–∂–∞—Ö –∏ –≤ —Å–ª–∞–±—ã—Ö –∑–¥–∞–Ω–∏—è—Ö. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–∞–º—è—Ç–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∏–∂–µ.",
        warning_title_none: "",

        modal_how_title: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Seismo-Wake",
        modal_how_intro: "Seismo-Wake ‚Äî —ç—Ç–æ –ª—ë–≥–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –æ—Ç –≤–∞—Å –±—ã–ª–∏ –Ω–µ–¥–∞–≤–Ω–∏–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è.",
        modal_how_section1_title: "1. –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ",
        modal_how_section1_text: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Å–µ–π—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, USGS) –≤ —Ñ–æ—Ä–º–∞—Ç–µ GeoJSON –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –∏ –Ω–µ–¥–µ–ª—é. –°–æ–±—ã—Ç–∏—è —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Å, —Å—É—Ç–∫–∏, –Ω–µ–¥–µ–ª—è) –∏ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞.",
        modal_how_section2_title: "2. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è ¬´–ø–æ–±–ª–∏–∑–æ—Å—Ç–∏¬ª",
        modal_how_section2_text: "–ü–æ–±–ª–∏–∑–æ—Å—Ç–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—Å—ë, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Ç–µ–Ω –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –æ—Ç –≤–∞—à–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è. –¢–æ—á–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.",
        modal_how_section3_title: "3. –ü–æ—á–µ–º—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ",
        modal_how_section3_text: "–ö–æ–≥–¥–∞ –≤—ã —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –≤–∫–ª–∞–¥–∫—É –∏–ª–∏ –≥–∞—Å–∏—Ç–µ —ç–∫—Ä–∞–Ω, –º–æ–±–∏–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –≤ —Ñ–æ–Ω–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∞–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª. –ü–æ–∫–∞ Seismo-Wake –æ—Ç–∫—Ä—ã—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –æ–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.",
        modal_how_section4_title: "4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA)",
        modal_how_section4_text: "Seismo-Wake –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ PWA: –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é, –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ¬´–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω. –ó–∞–ø—É—Å–∫ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ, –±–µ–∑ –ª–∏—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞.",
        modal_how_section5_text: "–ó–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –Ω–∞ GitHub:",

        modal_safety_title: "–ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏",
        modal_safety_disclaimer: "–≠—Ç–∏ —Å–æ–≤–µ—Ç—ã –Ω–æ—Å—è—Ç –æ–±—â–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ú–ß–° –∏ –º–µ—Å—Ç–Ω—ã—Ö —Å–ª—É–∂–±. –í—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–π—Ç–µ —É–∫–∞–∑–∞–Ω–∏—è–º –≤–ª–∞—Å—Ç–µ–π –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –≤–æ–∫—Ä—É–≥ –≤–∞—Å.",
        modal_safety_now_title: "–ï—Å–ª–∏ —Ç–æ–ª—á–∫–∏ —É–∂–µ –Ω–∞—á–∞–ª–∏—Å—å",
        modal_safety_now_1: "–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –æ—Ü–µ–Ω–∏—Ç–µ –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É –≤–æ–∫—Ä—É–≥ –∏ –∏–∑–±–µ–≥–∞–π—Ç–µ –ø–∞–Ω–∏–∫–∏.",
        modal_safety_now_2: "–ï—Å–ª–∏ –≤—ã –≤ –¥–æ–º–µ ‚Äî –æ—Ç–æ–π–¥–∏—Ç–µ –æ—Ç —Å—Ç–µ–∫–ª–∞ –∏ —Ç—è–∂—ë–ª–æ–π –º–µ–±–µ–ª–∏, –Ω–µ —Å—Ç–æ–π—Ç–µ –ø–æ–¥ –ª—é—Å—Ç—Ä–∞–º–∏ –∏ –ø–æ–ª–∫–∞–º–∏.",
        modal_safety_now_3: "–ï—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –≤ –¥–æ–º–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–∏–≥–µ–ª–∏ –∏–ª–∏ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–µ–Ω—ã ‚Äî —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –±—ã—Ç—å —Ä—è–¥–æ–º —Å –Ω–∏–º–∏, –Ω–æ –Ω–µ –ø–æ–¥ –Ω–∞–≤–∏—Å–∞—é—â–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏.",
        modal_safety_now_4: "–ù–µ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ª–∏—Ñ—Ç–æ–º, –Ω–µ –≤—ã–±–µ–≥–∞–π—Ç–µ –≤ –ø–∞–Ω–∏–∫–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ –≤–æ –≤—Ä–µ–º—è —Å–∏–ª—å–Ω—ã—Ö —Ç–æ–ª—á–∫–æ–≤.",
        modal_safety_after_title: "–ü–æ—Å–ª–µ –æ—â—É—Ç–∏–º—ã—Ö —Ç–æ–ª—á–∫–æ–≤",
        modal_safety_after_1: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª—é–¥–µ–π —Ä—è–¥–æ–º. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é –∏–ª–∏ —Å–ª—É–∂–±—É —Å–ø–∞—Å–µ–Ω–∏—è.",
        modal_safety_after_2: "–û—Ü–µ–Ω–∏—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏–µ: –µ—Å—Ç—å –ª–∏ —Ç—Ä–µ—â–∏–Ω—ã, –æ–±—Ä—É—à–µ–Ω–∏—è, –∑–∞–ø–∞—Ö –≥–∞–∑–∞, –∑–∞–¥—ã–º–ª–µ–Ω–∏–µ. –ü—Ä–∏ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è—Ö –ª—É—á—à–µ –ø–æ–∫–∏–Ω—É—Ç—å –∑–¥–∞–Ω–∏–µ.",
        modal_safety_after_3: "–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –∞—Ñ—Ç–µ—Ä—à–æ–∫–∞–º ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —Ç–æ–ª—á–∫–∞–º –º–µ–Ω—å—à–µ–π —Å–∏–ª—ã. –û–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–æ–≤ –∏ –¥–Ω–µ–π.",
        modal_safety_app_title: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Seismo-Wake –ø–æ—Å–ª–µ —Ç–æ–ª—á–∫–∞",
        modal_safety_app_1: "–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –±—ã–ª–æ –ª–∏ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–æ —Å–∏–ª—å–Ω–æ–µ –∏ –∫–∞–∫ –¥–∞–ª–µ–∫–æ –æ—Ç –≤–∞—Å.",
        modal_safety_app_2: "–ü–æ–º–Ω–∏—Ç–µ: –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ –¥–∞–ª–µ–∫–æ, –ª–æ–∫–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–∫–∞—á–µ—Å—Ç–≤–æ –∑–¥–∞–Ω–∏—è, —ç—Ç–∞–∂, –≥—Ä—É–Ω—Ç) –º–æ–≥—É—Ç —É—Å–∏–ª–∏–≤–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ.",
        modal_safety_app_3: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ Seismo-Wake –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∞ –Ω–µ –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ—à–µ–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞—Ç—å.",

        modal_donate_title: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞",
        modal_donate_text: "–í–∞—à –¥–æ–Ω–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å Seismo-Wake –∏ –¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å:",
        modal_donate_boosty_btn: "–î–æ–Ω–∞—Ç –∫–∞—Ä—Ç–æ–π (Boosty)",
        modal_donate_kofi_btn: "Donat / PayPal / card (Ko-fi)",
        modal_donate_thanks: "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É: –¥–∞–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–π –≤–∑–Ω–æ—Å –º–æ–∂–µ—Ç –æ–¥–Ω–∞–∂–¥—ã –ø–æ–º–æ—á—å —Å–ø–∞—Å—Ç–∏ —á—å—é-—Ç–æ –∂–∏–∑–Ω—å, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –≤–æ–≤—Ä–µ–º—è –ø–æ–¥—Å–∫–∞–∂–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ."
      },
      en: {
        app_title: "Seismo-Wake",
        tagline: "Early insight into where and how far quakes happened around you.",
        btn_refresh: "Refresh data",
        btn_install: "Install app",
        btn_donate: "Support the project",
        btn_how: "How it works",
        region_label: "Your region:",
        location_placeholder: "City or region (Almaty, Astana, Urumqi‚Ä¶)",
        btn_use_geo: "My location",
        city_hint: "Major cities and capitals are supported. If a city is not found, the last known location is used.",
        cities_error_text: "Failed to load city list.",
        cities_error_link: "Open online version",
        card_last_significant: "Latest significant event nearby",
        card_near_hour: "Last hour nearby",
        card_near_day: "Last 24 hours nearby",
        card_near_week: "Last week nearby",
        card_world_strong: "Strong quakes worldwide (24h)",
        card_safety_title: "üìã Safety tips",
        card_safety_body: "Short reminder how to act during noticeable shaking. These tips do not replace official instructions but help to stay calm and reasonable.",
        btn_safety_main: "How to act during an earthquake",
        no_last_significant: "No significant events nearby so far.",
        no_hour_events: "No nearby events in the last hour.",
        no_day_events: "No additional nearby events in the last 24 hours.",
        no_week_events: "No additional nearby events in the last week.",
        no_world_strong: "No strong events (M5.5+) detected in the last 24 hours according to the source.",
        world_label_hint: "Only earthquakes that appear in the official feed are taken into account.",
        footer_text: "Important: the app runs locally in your browser, but internet access is required to fetch up-to-date earthquake data.",
        footer_dev_profile: "Developer profile",

        updated_initial: "No update yet",
        updated_just_now: "Updated just now",
        updated_seconds: "Updated: {n} s ago",
        updated_minutes: "Updated: {n} min ago",
        updated_hours: "Updated: {n} h ago",
        updated_date: "Updated: {date}",

        warning_title_danger: "Strong earthquake nearby!",
        warning_text_danger: "If you felt strong shaking, assess the building and people around you, leave dangerous areas if needed and follow official guidance from authorities.",
        warning_title_noticeable: "Noticeable shaking is possible in your region.",
        warning_text_noticeable: "Even a moderate earthquake can feel stronger on upper floors or in weaker buildings. Stay calm and follow the safety tips below.",
        warning_title_none: "",

        modal_how_title: "How Seismo-Wake works",
        modal_how_intro: "Seismo-Wake is a lightweight web app that helps you understand where and how far recent earthquakes occurred around you.",
        modal_how_section1_title: "1. Data source",
        modal_how_section1_text: "The app receives information from an open seismic source (e.g. USGS) in GeoJSON format for the last day and week. Events are grouped by time (hour, day, week) and distance from your region.",
        modal_how_section2_title: "2. What counts as \"nearby\"",
        modal_how_section2_text: "Nearby means roughly within a few hundred kilometers from the selected city or your current location. Exact distance is computed using geographic coordinates.",
        modal_how_section3_title: "3. Why background updates are limited",
        modal_how_section3_text: "When you minimize the tab or turn the screen off, the mobile OS throttles scripts. Because of that, the app cannot poll data every 10 seconds in the background and play alerts automatically. While Seismo-Wake is open on screen, it refreshes data regularly and shows current information.",
        modal_how_section4_title: "4. Install as app (PWA)",
        modal_how_section4_text: "You can install Seismo-Wake as a PWA: open the online version, wait for the browser to suggest \"Install app\", and add it to your home screen. It will run in a separate window without extra browser UI.",
        modal_how_section5_text: "You can follow the project and updates on GitHub:",

        modal_safety_title: "Safety tips during an earthquake",
        modal_safety_disclaimer: "These tips are general and do not replace official guidance from authorities. Always follow local emergency services and take real conditions into account.",
        modal_safety_now_title: "If shaking has already started",
        modal_safety_now_1: "Stay as calm as possible, quickly assess your surroundings and avoid panic.",
        modal_safety_now_2: "Indoors, move away from glass and heavy furniture; do not stand under chandeliers or shelves.",
        modal_safety_now_3: "If you know where structural beams or strong walls are, stay near them but not under heavy hanging objects.",
        modal_safety_now_4: "Do not use elevators and avoid running in panic down stairways during strong shaking.",
        modal_safety_after_title: "After noticeable shaking",
        modal_safety_after_1: "Check yourself and people nearby. Call emergency services if needed.",
        modal_safety_after_2: "Assess the building: cracks, collapses, gas smell, smoke. Leave if there are serious signs of damage.",
        modal_safety_after_3: "Be ready for aftershocks ‚Äî smaller quakes that can follow for hours or days.",
        modal_safety_app_title: "Using Seismo-Wake after shaking",
        modal_safety_app_1: "Open the app and check whether there was an event nearby, how strong it was and how far from you.",
        modal_safety_app_2: "Remember: even if the epicenter is far away, local conditions (building quality, floor, soil) can amplify shaking.",
        modal_safety_app_3: "Use Seismo-Wake as an additional source of information, not the only basis for deciding what to do.",

        modal_donate_title: "Support the developer",
        modal_donate_text: "Your support helps keep Seismo-Wake free and improve it over time. If you wish, you can donate via:",
        modal_donate_boosty_btn: "Donate by card (Boosty)",
        modal_donate_kofi_btn: "Donat / PayPal / card (Ko-fi)",
        modal_donate_thanks: "Thank you for your support: even a small donation can one day help this tool save someone's life by showing timely information."
      }
    };

    let extraTranslations = {}; // –∏–∑ translations-extra.json
    let effectiveTranslations = {}; // base + extra

    let currentLang = "ru";

    function buildEffectiveTranslations() {
      const result = {};
      const langs = new Set([
        ...Object.keys(baseTranslations),
        ...Object.keys(extraTranslations)
      ]);
      langs.forEach((lang) => {
        result[lang] = {
          ...(baseTranslations[lang] || {}),
          ...(extraTranslations[lang] || {})
        };
      });
      effectiveTranslations = result;
    }

    function t(key, vars = null) {
      const dict = (effectiveTranslations[currentLang] || effectiveTranslations["en"] || {});
      let str = dict[key] || baseTranslations["ru"][key] || baseTranslations["en"][key] || "";
      if (vars && typeof str === "string") {
        str = str.replace(/\{(\w+)\}/g, (m, k) => (k in vars ? vars[k] : m));
      }
      return str;
    }

    function applyTranslations() {
      document.documentElement.lang = currentLang;
      const nodes = document.querySelectorAll("[data-i18n]");
      nodes.forEach((el) => {
        const key = el.dataset.i18n;
        if (!key) return;
        const text = t(key);
        // placeholder –¥–ª—è input
        if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
          el.placeholder = text;
        } else {
          el.textContent = text;
        }
      });
      // –æ–±–Ω–æ–≤–∏–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —è–∑—ã–∫–∞:
      updateLastUpdateLabel(); // –ø–µ—Ä–µ—Ä–∏—Å—É–µ–º —Å—Ç—Ä–æ–∫—É "–û–±–Ω–æ–≤–ª–µ–Ω–æ ..."
      updateWarningBanner();   // –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    }

    async function loadExtraTranslations() {
      try {
        const res = await fetch("translations-extra.json");
        if (!res.ok) return;
        const data = await res.json();
        extraTranslations = data || {};
      } catch (e) {
        // –º–æ–ª—á–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
        extraTranslations = {};
      } finally {
        buildEffectiveTranslations();
        applyTranslations();
      }
    }

    // -------------------------
    // GLOABAL STATE
    // -------------------------

    const NEARBY_KM = 500; // —á—Ç–æ —Å—á–∏—Ç–∞–µ–º "–ø–æ–±–ª–∏–∑–æ—Å—Ç–∏"
    const SIGNIFICANT_MAG = 3.5; // —á—Ç–æ —Å—á–∏—Ç–∞–µ–º "–∑–Ω–∞—á–∏–º—ã–º" —Ä—è–¥–æ–º
    const WORLD_STRONG_MAG = 5.5;

    const USGS_DAY_URL  = "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson";
    const USGS_WEEK_URL = "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson";

    let userLocation = {
      lat: 43.238949, // –ê–ª–º–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      lon: 76.889709,
      label: "Almaty (default)"
    };

    let lastUpdateTime = null;
    let updateTimerId = null;
    let autoRefreshTimerId = null;

    let lastDataDay = [];
    let lastDataWeek = [];

    let lastNearbyStrong = null; // –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è

    // -------------------------
    // UTILS
    // -------------------------

    function haversineDistanceKm(lat1, lon1, lat2, lon2) {
      const R = 6371;
      const toRad = (deg) => deg * Math.PI / 180;
      const dLat = toRad(lat2 - lat1);
      const dLon = toRad(lon2 - lon1);
      const a = Math.sin(dLat / 2) ** 2 +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      return R * c;
    }

    function formatTimeAgo(ts) {
      const now = Date.now();
      const diffMs = now - ts;
      if (diffMs < 0) {
        return t("updated_date", { date: new Date(ts).toLocaleString() });
      }
      const sec = Math.floor(diffMs / 1000);
      const min = Math.floor(sec / 60);
      const hr = Math.floor(min / 60);
      if (sec < 5) return t("updated_just_now");
      if (sec < 60) return t("updated_seconds", { n: sec });
      if (min < 60) return t("updated_minutes", { n: min });
      if (hr < 24) return t("updated_hours", { n: hr });
      return t("updated_date", { date: new Date(ts).toLocaleString() });
    }

    function formatEventTimeAgo(ts) {
      const now = Date.now();
      const diffMs = now - ts;
      const sec = Math.floor(diffMs / 1000);
      const min = Math.floor(sec / 60);
      const hr = Math.floor(min / 60);
      const day = Math.floor(hr / 24);

      if (sec < 60) {
        return currentLang === "ru" ? `${sec} —Å–µ–∫ –Ω–∞–∑–∞–¥` :
               currentLang === "kz" ? `${sec} —Å–µ–∫ –±“±—Ä—ã–Ω` :
               currentLang === "fr" ? `il y a ${sec} s` :
               `${sec} s ago`;
      }
      if (min < 60) {
        return currentLang === "ru" ? `${min} –º–∏–Ω –Ω–∞–∑–∞–¥` :
               currentLang === "kz" ? `${min} –º–∏–Ω –±“±—Ä—ã–Ω` :
               currentLang === "fr" ? `il y a ${min} min` :
               `${min} min ago`;
      }
      if (hr < 24) {
        return currentLang === "ru" ? `${hr} —á –Ω–∞–∑–∞–¥` :
               currentLang === "kz" ? `${hr} —Å–∞“ì–∞—Ç –±“±—Ä—ã–Ω` :
               currentLang === "fr" ? `il y a ${hr} h` :
               `${hr} h ago`;
      }
      if (day === 1) {
        return currentLang === "ru" ? `1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥` :
               currentLang === "kz" ? `1 –∫“Ø–Ω –±“±—Ä—ã–Ω` :
               currentLang === "fr" ? `il y a 1 jour` :
               `1 day ago`;
      }
      return currentLang === "ru" ? `${day} –¥–Ω –Ω–∞–∑–∞–¥` :
             currentLang === "kz" ? `${day} –∫“Ø–Ω –±“±—Ä—ã–Ω` :
             currentLang === "fr" ? `il y a ${day} j` :
             `${day} days ago`;
    }

    function classifySeverity(mag, distanceKm) {
      if (mag >= 6.0 && distanceKm <= 300) return "high";
      if (mag >= 5.0 && distanceKm <= 500) return "high";
      if (mag >= 4.0 && distanceKm <= 500) return "mid";
      if (mag >= 3.0 && distanceKm <= 700) return "mid";
      return "low";
    }

    function createEventElement(ev) {
      const div = document.createElement("div");
      const severity = classifySeverity(ev.mag, ev.distanceKm);
      div.className = "event-item severity-" + severity;

      const severityLabel = document.createElement("div");
      severityLabel.className = "severity-label";
      if (severity === "high") {
        severityLabel.textContent =
          (currentLang === "ru") ? "–í–´–°–û–ö–ò–ô –£–†–û–í–ï–ù–¨" :
          (currentLang === "kz") ? "–ñ–û“í–ê–†–´ –î–ï“¢–ì–ï–ô" :
          (currentLang === "fr") ? "NIVEAU √âLEV√â" :
          "HIGH LEVEL";
      } else if (severity === "mid") {
        severityLabel.textContent =
          (currentLang === "ru") ? "–ó–ù–ê–ß–ò–ú–û–ï –°–û–ë–´–¢–ò–ï" :
          (currentLang === "kz") ? "–ê–ô–¢–£–õ–´ –û“ö–ò“í–ê" :
          (currentLang === "fr") ? "√âV√âNEMENT SIGNIFICATIF" :
          "SIGNIFICANT EVENT";
      } else {
        severityLabel.textContent =
          (currentLang === "ru") ? "–ù–ï–ë–û–õ–¨–®–û–ï –°–û–ë–´–¢–ò–ï" :
          (currentLang === "kz") ? "–®–ê“í–´–ù –û“ö–ò“í–ê" :
          (currentLang === "fr") ? "√âV√âNEMENT MINEUR" :
          "MINOR EVENT";
      }

      const rowMain = document.createElement("div");
      rowMain.className = "event-row-main";

      const timeAgoSpan = document.createElement("div");
      timeAgoSpan.className = "event-timeago";
      timeAgoSpan.textContent = formatEventTimeAgo(ev.time);

      const magSpan = document.createElement("div");
      magSpan.className = "event-mag";
      magSpan.textContent = `M${ev.mag.toFixed(1)}`;

      rowMain.appendChild(timeAgoSpan);
      rowMain.appendChild(magSpan);

      const rowSecondary = document.createElement("div");
      rowSecondary.className = "event-row-secondary";
      const distStr = `${Math.round(ev.distanceKm)} –∫–º`;
      const depthStr = `${Math.round(ev.depthKm)} –∫–º`;
      rowSecondary.textContent =
        (currentLang === "ru") ? `–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${distStr}, –≥–ª—É–±–∏–Ω–∞: ${depthStr}` :
        (currentLang === "kz") ? `“ö–∞—à—ã“õ—Ç—ã“õ: ${distStr}, —Ç–µ—Ä–µ“£–¥—ñ–∫: ${depthStr}` :
        (currentLang === "fr") ? `Distance : ${distStr}, profondeur : ${depthStr}` :
        `Distance: ${distStr}, depth: ${depthStr}`;

      const rowPlace = document.createElement("div");
      rowPlace.className = "event-row-place";
      rowPlace.textContent = ev.place || "";

      const srcRow = document.createElement("div");
      srcRow.className = "event-source";
      srcRow.textContent = "USGS";

      div.appendChild(severityLabel);
      div.appendChild(rowMain);
      div.appendChild(rowSecondary);
      div.appendChild(rowPlace);
      div.appendChild(srcRow);

      return div;
    }

    // -------------------------
    // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ú–ï–¢–ö–ò "–û–±–Ω–æ–≤–ª–µ–Ω–æ"
    // -------------------------

    function updateLastUpdateLabel() {
      const el = document.getElementById("updateText");
      if (!el) return;
      if (!lastUpdateTime) {
        el.textContent = t("updated_initial");
        return;
      }
      el.textContent = formatTimeAgo(lastUpdateTime);
    }

    function startLastUpdateTimer() {
      if (updateTimerId) clearInterval(updateTimerId);
      updateTimerId = setInterval(updateLastUpdateLabel, 1000);
    }

    // -------------------------
    // –ü–†–ï–î–£–ü–†–ï–ñ–î–ê–Æ–©–ò–ô –ë–ê–ù–ù–ï–†
    // -------------------------

    function updateWarningBanner() {
      const banner = document.getElementById("warningBanner");
      if (!banner) return;

      if (!lastNearbyStrong) {
        banner.classList.add("hidden");
        return;
      }

      const { mag, distanceKm, time } = lastNearbyStrong;
      const now = Date.now();
      const diffMs = now - time;
      const minAgo = diffMs / 60000;

      let level = null;
      if (mag >= 5.5 && distanceKm <= 300 && minAgo < 60) {
        level = "danger";
      } else if (mag >= 4.0 && distanceKm <= 500 && minAgo < 120) {
        level = "noticeable";
      }

      if (!level) {
        banner.classList.add("hidden");
        return;
      }

      const titleEl = document.getElementById("warningTitle");
      const textEl = document.getElementById("warningText");

      if (level === "danger") {
        titleEl.textContent = t("warning_title_danger");
        textEl.textContent = t("warning_text_danger");
      } else {
        titleEl.textContent = t("warning_title_noticeable");
        textEl.textContent = t("warning_text_noticeable");
      }

      banner.classList.remove("hidden");
    }

    // -------------------------
    // –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• USGS
    // -------------------------

    async function fetchQuakes() {
      const spinner = document.getElementById("spinner");
      spinner.classList.add("visible");
      try {
        const [dayRes, weekRes] = await Promise.all([
          fetch(USGS_DAY_URL),
          fetch(USGS_WEEK_URL)
        ]);

        const dayJson = await dayRes.json();
        const weekJson = await weekRes.json();

        lastDataDay = (dayJson.features || []).map(f => normalizeFeature(f));
        lastDataWeek = (weekJson.features || []).map(f => normalizeFeature(f));

        lastUpdateTime = Date.now();
        updateLastUpdateLabel();
        startLastUpdateTimer();

        processAndRender();
      } catch (e) {
        console.error("Error fetching quakes", e);
      } finally {
        spinner.classList.remove("visible");
      }
    }

    function normalizeFeature(f) {
      const coords = f.geometry && f.geometry.coordinates || [0,0,0];
      const lon = coords[0];
      const lat = coords[1];
      const depthKm = coords[2] || 0;
      const mag = (f.properties && typeof f.properties.mag === "number")
        ? f.properties.mag : 0;
      const time = (f.properties && f.properties.time) || Date.now();
      const place = (f.properties && f.properties.place) || "";
      const id = f.id || (f.properties && f.properties.code) || `${time}_${lat}_${lon}`;
      return { id, lat, lon, depthKm, mag, time, place };
    }

    function processAndRender() {
      const now = Date.now();
      const oneHourAgo = now - 3600_000;
      const oneDayAgo  = now - 24 * 3600_000;
      const oneWeekAgo = now - 7  * 24 * 3600_000;

      const dayWithDist = lastDataDay.map(ev => ({
        ...ev,
        distanceKm: haversineDistanceKm(userLocation.lat, userLocation.lon, ev.lat, ev.lon)
      }));
      const weekWithDist = lastDataWeek.map(ev => ({
        ...ev,
        distanceKm: haversineDistanceKm(userLocation.lat, userLocation.lon, ev.lat, ev.lon)
      }));

      const usedIds = new Set();

      // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–∏–º–æ–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
      const nearbySignificant = dayWithDist
        .filter(ev => ev.distanceKm <= NEARBY_KM && ev.mag >= SIGNIFICANT_MAG)
        .sort((a, b) => b.time - a.time);

      const lastSigContainer = document.getElementById("lastSignificantContainer");
      lastSigContainer.innerHTML = "";
      if (nearbySignificant.length === 0) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        empty.textContent = t("no_last_significant");
        lastSigContainer.appendChild(empty);
        lastNearbyStrong = null;
      } else {
        const ev = nearbySignificant[0];
        usedIds.add(ev.id);
        lastNearbyStrong = ev;
        const list = document.createElement("div");
        list.className = "events-list";
        list.appendChild(createEventElement(ev));
        lastSigContainer.appendChild(list);
      }

      updateWarningBanner();

      // –ó–∞ —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
      const nearHourContainer = document.getElementById("nearHourContainer");
      nearHourContainer.innerHTML = "";
      const nearHour = dayWithDist
        .filter(ev => ev.time >= oneHourAgo && ev.distanceKm <= NEARBY_KM && !usedIds.has(ev.id))
        .sort((a, b) => b.time - a.time)
        .slice(0, 5);
      if (nearHour.length === 0) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        empty.textContent = t("no_hour_events");
        nearHourContainer.appendChild(empty);
      } else {
        nearHour.forEach(ev => {
          usedIds.add(ev.id);
          nearHourContainer.appendChild(createEventElement(ev));
        });
      }

      // –ó–∞ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
      const nearDayContainer = document.getElementById("nearDayContainer");
      nearDayContainer.innerHTML = "";
      const nearDay = dayWithDist
        .filter(ev => ev.time >= oneDayAgo && ev.distanceKm <= NEARBY_KM && !usedIds.has(ev.id))
        .sort((a, b) => b.time - a.time)
        .slice(0, 5);
      if (nearDay.length === 0) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        empty.textContent = t("no_day_events");
        nearDayContainer.appendChild(empty);
      } else {
        nearDay.forEach(ev => {
          usedIds.add(ev.id);
          nearDayContainer.appendChild(createEventElement(ev));
        });
      }

      // –ó–∞ –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ (–∫—Ä–æ–º–µ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö)
      const nearWeekContainer = document.getElementById("nearWeekContainer");
      nearWeekContainer.innerHTML = "";
      const nearWeek = weekWithDist
        .filter(ev => ev.time >= oneWeekAgo && ev.distanceKm <= NEARBY_KM && !usedIds.has(ev.id))
        .sort((a, b) => b.time - a.time)
        .slice(0, 5);
      if (nearWeek.length === 0) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        empty.textContent = t("no_week_events");
        nearWeekContainer.appendChild(empty);
      } else {
        nearWeek.forEach(ev => {
          usedIds.add(ev.id);
          nearWeekContainer.appendChild(createEventElement(ev));
        });
      }

      // –°–∏–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –º–∏—Ä–µ –∑–∞ 24 —á–∞—Å–∞
      const worldStrongContainer = document.getElementById("worldStrongContainer");
      worldStrongContainer.innerHTML = "";
      const worldStrong = dayWithDist
        .filter(ev => ev.mag >= WORLD_STRONG_MAG)
        .sort((a, b) => b.time - a.time)
        .slice(0, 5);
      if (worldStrong.length === 0) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        empty.textContent = t("no_world_strong");
        worldStrongContainer.appendChild(empty);
      } else {
        worldStrong.forEach(ev => {
          worldStrongContainer.appendChild(createEventElement(ev));
        });
      }
    }

    // -------------------------
    // –ì–û–†–û–î–ê (cities.json)
    // -------------------------

    let citiesList = [];

    async function loadCities() {
      const errEl = document.getElementById("citiesError");
      errEl.classList.add("hidden");
      try {
        const res = await fetch("cities.json");
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();
        if (!Array.isArray(data)) throw new Error("cities.json must be array");
        citiesList = data;
        populateCityDatalist();
      } catch (e) {
        console.warn("Failed to load cities.json", e);
        citiesList = []; // fallback –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ
        errEl.classList.remove("hidden");
      }
    }

    function populateCityDatalist() {
      const dl = document.getElementById("citiesList");
      dl.innerHTML = "";
      citiesList.slice(0, 5000).forEach((c) => {
        const opt = document.createElement("option");
        opt.value = c.name || "";
        dl.appendChild(opt);
      });
    }

    function findCityByName(name) {
      if (!name) return null;
      const norm = name.trim().toLowerCase();
      if (!norm) return null;

      // —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –Ω–∞—á–∞–ª—É
      let best = null;
      citiesList.forEach((c) => {
        const n = (c.name || "").toLowerCase();
        if (n === norm) {
          best = c;
          return;
        }
      });
      if (best) return best;

      // –ø–æ –≤—Ö–æ–∂–¥–µ–Ω–∏—é
      const candidates = citiesList
        .filter(c => (c.name || "").toLowerCase().includes(norm))
        .sort((a, b) => (a.name || "").length - (b.name || "").length);
      return candidates[0] || null;
    }

    // -------------------------
    // GEOLOCATION
    // -------------------------

    function useGeolocation() {
      if (!navigator.geolocation) {
        alert(currentLang === "ru"
          ? "–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ."
          : "Geolocation is not supported in this browser.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude } = pos.coords;
          userLocation.lat = latitude;
          userLocation.lon = longitude;
          userLocation.label =
            (currentLang === "ru") ? "–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ (GPS)" :
            (currentLang === "kz") ? "–ú–µ–Ω—ñ“£ –æ—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω –∂–µ—Ä—ñ–º (GPS)" :
            (currentLang === "fr") ? "Ma position (GPS)" :
            "My location (GPS)";
          document.getElementById("currentRegion").textContent = userLocation.label;
          document.getElementById("cityInput").value = "";
          processAndRender();
        },
        (err) => {
          console.warn("Geo error", err);
          alert(currentLang === "ru"
            ? "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –≤—Ä—É—á–Ω—É—é."
            : "Failed to get geolocation. Allow access or choose a city manually.");
        }
      );
    }

    // -------------------------
    // –Ø–ó–´–ö
    // -------------------------

    function setLanguage(lang) {
      currentLang = lang;
      const buttons = document.querySelectorAll(".lang-btn");
      buttons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.lang === lang);
      });
      applyTranslations();
      processAndRender(); // —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ (timeAgo –∏ —Ç.–¥.) —Ç–æ–∂–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –≤–∏–∑—É–∞–ª—å–Ω–æ
    }

    // -------------------------
    // –ú–û–î–ê–õ–ö–ò
    // -------------------------

    function openModal(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.add("visible");
    }

    function closeModal(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.remove("visible");
    }

    // -------------------------
    // AUTO REFRESH
    // -------------------------

    function startAutoRefresh() {
      if (autoRefreshTimerId) clearInterval(autoRefreshTimerId);
      autoRefreshTimerId = setInterval(() => {
        fetchQuakes();
      }, 10_000); // –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    }

    // -------------------------
    // INIT
    // -------------------------

    document.addEventListener("DOMContentLoaded", () => {
      buildEffectiveTranslations();
      applyTranslations();
      loadExtraTranslations(); // –ø–æ–¥–≥—Ä—É–∂–∞–µ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã (KZ/FR/overrides)
      loadCities();
      fetchQuakes();
      startAutoRefresh();

      // –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å
      document.getElementById("btnRefresh").addEventListener("click", () => {
        fetchQuakes();
      });

      // –ì–µ–æ
      document.getElementById("btnGeo").addEventListener("click", () => {
        useGeolocation();
      });

      // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
      document.getElementById("cityInput").addEventListener("change", (e) => {
        const value = e.target.value;
        const city = findCityByName(value);
        if (!city) {
          // –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ—à–ª–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
          return;
        }
        userLocation.lat = city.lat;
        userLocation.lon = city.lon;
        userLocation.label = city.name;
        document.getElementById("currentRegion").textContent = city.name;
        processAndRender();
      });

      // –Ø–∑—ã–∫–∏
      document.querySelectorAll(".lang-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const lang = btn.dataset.lang;
          setLanguage(lang);
        });
      });

      // –ú–æ–¥–∞–ª–∫–∏
      document.getElementById("btnHow").addEventListener("click", () => openModal("modalHow"));
      document.getElementById("btnSafety").addEventListener("click", () => openModal("modalSafety"));
      document.getElementById("btnDonate").addEventListener("click", () => openModal("modalDonate"));

      document.querySelectorAll(".modal-backdrop").forEach(backdrop => {
        backdrop.addEventListener("click", (e) => {
          if (e.target === backdrop) {
            backdrop.classList.remove("visible");
          }
        });
      });

      document.querySelectorAll(".modal-close").forEach(btn => {
        const id = btn.dataset.closeModal;
        btn.addEventListener("click", () => closeModal(id));
      });

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ PWA (–ø—Ä–æ—Å—Ç–æ–µ —Å–æ–±—ã—Ç–∏–µ, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏)
      let deferredPrompt = null;
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
      });

      const btnInstall = document.getElementById("btnInstall");
      btnInstall.addEventListener("click", async () => {
        if (!deferredPrompt) {
          // –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–µ–º –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫—É
          window.open("https://zhanat-arch.github.io/Seismo-Wake/", "_blank");
          return;
        }
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === "accepted") {
          deferredPrompt = null;
        }
      });
    });
  </script>
</body>
</html>
