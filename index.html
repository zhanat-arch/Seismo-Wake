<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Seismo-Wake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Manifest for PWA -->
  <link rel="manifest" href="manifest.webmanifest" />

  <!-- Basic PWA meta -->
  <meta name="theme-color" content="#020617" />

  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --bg-soft: #020817;
      --card: #020b1b;
      --accent: #2563eb;
      --accent-soft: #172554;
      --danger: #b91c1c;
      --warn: #d97706;
      --safe: #16a34a;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-soft: #1f2937;
      --radius-lg: 18px;
      --radius-md: 14px;
      --radius-sm: 10px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        Roboto, sans-serif;
      background: radial-gradient(circle at top, #020617 0, #000 60%);
      color: var(--text-main);
      padding: 0;
    }

    .app-root {
      max-width: 640px;
      margin: 0 auto;
      min-height: 100vh;
      padding: 14px 12px 18px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .title-block {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #60a5fa, #1d4ed8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 16px;
      letter-spacing: 0.03em;
      color: #e5f0ff;
      box-shadow: 0 0 0 2px #0b1120, 0 4px 18px rgba(37, 99, 235, 0.9);
    }

    .title-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title-text h1 {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .lang-switcher {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .lang-btn {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-muted);
      font-size: 11px;
      padding: 4px 8px;
      cursor: pointer;
    }

    .lang-btn.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: #e5f0ff;
      font-weight: 600;
    }

    .card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      background: linear-gradient(135deg, #020617, #02081a);
      padding: 12px 12px 10px;
      margin-bottom: 10px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.5);
    }

    .card-soft {
      border-radius: var(--radius-lg);
      border: 1px solid #111827;
      background: linear-gradient(135deg, #020617, #02081a);
      padding: 12px;
      margin-bottom: 10px;
    }

    .card-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
    }

    .badge-pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid #0f172a;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .updated-label {
      font-size: 11px;
      color: var(--text-muted);
    }

    .main-actions {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 10px;
    }

    .btn {
      width: 100%;
      padding: 10px 10px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-main);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      border-color: #2563eb;
      color: white;
      box-shadow: 0 10px 30px rgba(37, 99, 235, 0.8);
    }

    .btn-outline {
      background: linear-gradient(135deg, #020617, #02081a);
    }

    .btn-ghost {
      background: transparent;
      border: 1px dashed #1f2937;
      color: var(--text-muted);
    }

    .btn-icon {
      font-size: 14px;
    }

    .location-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
    }

    .location-row-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .region-text {
      font-size: 13px;
      color: var(--text-main);
    }

    .region-text span {
      color: var(--text-muted);
      font-size: 12px;
    }

    .location-badges {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .chip {
      padding: 4px 8px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #1f2937;
      font-size: 11px;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .chip-primary {
      border-color: var(--accent);
      color: #bfdbfe;
      background: rgba(37, 99, 235, 0.12);
    }

    .chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .input-row {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .input {
      flex: 1;
      padding: 9px 10px;
      border-radius: var(--radius-md);
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text-main);
      font-size: 13px;
    }

    .input::placeholder {
      color: #6b7280;
    }

    .use-location-btn {
      padding: 9px 10px;
      border-radius: var(--radius-md);
      border: 1px solid #1d4ed8;
      background: #020617;
      color: #bfdbfe;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .use-location-btn span {
      font-size: 14px;
    }

    .city-error {
      margin-top: 6px;
      font-size: 11px;
      color: #fbbf24;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .city-error-arrow {
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid #fbbf24;
      background: transparent;
      color: #fbbf24;
      font-size: 12px;
      cursor: pointer;
    }

    .section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .section-title span.icon {
      font-size: 13px;
    }

    .events-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .event-card {
      display: flex;
      border-radius: var(--radius-md);
      border: 1px solid #111827;
      background: radial-gradient(circle at top left, #020617, #000);
      overflow: hidden;
      padding: 8px 10px;
      gap: 10px;
    }

    .event-strip {
      width: 5px;
      border-radius: 999px;
      background: var(--safe);
      flex-shrink: 0;
      margin: -8px 0;
    }

    .event-strip.warn {
      background: var(--warn);
    }

    .event-strip.danger {
      background: var(--danger);
    }

    .event-main {
      flex: 1;
      min-width: 0;
    }

    .event-header-line {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: baseline;
      margin-bottom: 2px;
    }

    .event-timeago {
      font-size: 13px;
      font-weight: 600;
    }

    .event-mag {
      font-size: 12px;
      color: #e5e7eb;
      font-weight: 500;
    }

    .event-mag strong {
      font-weight: 700;
    }

    .event-second-line {
      font-size: 12px;
      color: var(--text-muted);
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 1px;
    }

    .event-third-line {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 1px;
    }

    .event-fourth-line {
      font-size: 11px;
      color: #6b7280;
    }

    .text-strong {
      font-weight: 600;
      color: #e5e7eb;
    }

    .last-significant-card {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(248, 113, 113, 0.5);
      background: radial-gradient(circle at top, rgba(127, 29, 29, 0.45), #020617);
      padding: 10px 10px 8px;
      margin-bottom: 10px;
      box-shadow: 0 20px 45px rgba(127, 29, 29, 0.7);
    }

    .last-significant-heading {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .last-title {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .pulse-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #fecaca;
      box-shadow: 0 0 12px rgba(248, 113, 113, 1);
    }

    .badge-danger {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(185, 28, 28, 0.4);
      border: 1px solid rgba(248, 113, 113, 0.7);
      color: #fee2e2;
    }

    .empty-text {
      font-size: 12px;
      color: var(--text-muted);
    }

    .footer-note {
      margin-top: 10px;
      font-size: 11px;
      color: #6b7280;
      text-align: left;
    }

    .footer-note a {
      color: #60a5fa;
      text-decoration: none;
    }

    .footer-note a:hover {
      text-decoration: underline;
    }

    /* Modals */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 40;
    }

    .modal {
      max-width: 520px;
      width: 100%;
      background: radial-gradient(circle at top, #020617, #000);
      border-radius: 20px;
      border: 1px solid #1f2937;
      padding: 14px 14px 12px;
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.9);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }

    .modal-title {
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-close {
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text-muted);
      width: 26px;
      height: 26px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
    }

    .modal-body {
      font-size: 13px;
      color: var(--text-main);
      max-height: 70vh;
      overflow-y: auto;
      padding-right: 4px;
    }

    .modal-body p {
      margin: 4px 0;
    }

    .modal-body ul {
      padding-left: 18px;
      margin: 4px 0 6px;
    }

    .modal-body li {
      margin-bottom: 3px;
    }

    .donate-heart {
      font-size: 24px;
      text-align: center;
      margin-bottom: 6px;
    }

    .donate-heart span {
      display: inline-flex;
      padding: 8px 10px;
      border-radius: 999px;
      background: radial-gradient(circle at top, #f97373, #b91c1c);
      box-shadow: 0 0 20px rgba(248, 113, 113, 0.9);
    }

    .donate-buttons {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .donate-btn {
      width: 100%;
      padding: 9px 10px;
      border-radius: 14px;
      border: 1px solid;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .donate-btn.boosty {
      border-color: #f97316;
      background: radial-gradient(circle at top, #fb923c, #b45309);
      color: #111827;
    }

    .donate-btn.kofi {
      border-color: #0ea5e9;
      background: radial-gradient(circle at top, #0ea5e9, #0369a1);
      color: #e0f2fe;
    }

    .donate-small {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .safety-section-title {
      font-weight: 600;
      margin-top: 6px;
      margin-bottom: 2px;
      font-size: 13px;
    }

    .how-works-small {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .spinner {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 2px solid #1f2937;
      border-top-color: #60a5fa;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    @media (min-width: 720px) {
      .app-root {
        padding-top: 18px;
      }
      .title-text h1 {
        font-size: 20px;
      }
      .subtitle {
        font-size: 13px;
      }
      .btn,
      .use-location-btn {
        font-size: 13px;
      }
      .input {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="app-root">
    <header>
      <div class="title-block">
        <div class="logo">SW</div>
        <div class="title-text">
          <h1 id="t-app-title">Seismo-Wake</h1>
          <div class="subtitle" id="t-subtitle">
            –†–∞–Ω–Ω–µ–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Ç–æ–ª—á–∫–∞—Ö –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
          </div>
        </div>
      </div>
      <div class="lang-switcher">
        <button class="lang-btn active" data-lang="ru">RU</button>
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="kk">KZ</button>
        <button class="lang-btn" data-lang="zh">‰∏≠Êñá</button>
        <button class="lang-btn" data-lang="fr">FR</button>
      </div>
    </header>

    <div class="card">
      <div class="card-header-row">
        <div class="badge-pill">
          <span>üåç</span>
          <span id="t-app-mode">–û–Ω–ª–∞–π–Ω-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</span>
        </div>
        <div class="updated-label">
          <span id="t-updated-label">–û–±–Ω–æ–≤–ª–µ–Ω–æ:</span>
          <span id="lastUpdated">‚Äî</span>
        </div>
      </div>

      <div class="main-actions">
        <button class="btn btn-primary" id="btnRefresh">
          <span class="btn-icon">‚ö°</span><span id="t-btn-refresh">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</span>
        </button>
        <button class="btn btn-outline" id="btnInstall">
          <span class="btn-icon">üì≤</span><span id="t-btn-install">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</span>
        </button>
        <button class="btn btn-outline" id="btnDonate">
          <span class="btn-icon">‚ù§Ô∏è</span><span id="t-btn-donate">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
        </button>
        <button class="btn btn-ghost" id="btnHow">
          <span class="btn-icon">‚ùì</span><span id="t-btn-how">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
        </button>
      </div>

      <div class="location-row">
        <div class="location-row-top">
          <div class="region-text">
            <div id="currentRegionLabel">
              <span id="t-your-region">–í–∞—à —Ä–µ–≥–∏–æ–Ω:</span>
              <strong id="currentRegion">‚Äî</strong>
            </div>
            <div style="font-size:11px;color:var(--text-muted);" id="geoStatus"></div>
          </div>
          <div class="location-badges">
            <div class="chip chip-primary">
              <span class="chip-dot"></span>
              <span id="t-live-label">–í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</span>
            </div>
          </div>
        </div>

        <div class="input-row">
          <input
            id="cityInput"
            class="input"
            list="cityList"
            placeholder="–ê–ª–º–∞—Ç—ã, –¢–æ–∫–∏–æ, –°—Ç–∞–º–±—É–ª‚Ä¶"
          />
          <datalist id="cityList"></datalist>
          <button class="use-location-btn" id="btnUseLocation">
            <span>üìç</span>
            <span id="t-use-my-location">–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</span>
          </button>
        </div>

        <div id="cityError" class="city-error" style="display:none;">
          <span id="t-city-error">
            –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤. –ù–∞–∂–º–∏—Ç–µ —Å—Ç—Ä–µ–ª–æ—á–∫—É:
          </span>
          <button class="city-error-arrow" id="btnCityErrorArrow">‚ûú</button>
        </div>
      </div>

      <button class="btn btn-ghost" id="btnOpenOnline" style="margin-top:4px;">
        <span class="btn-icon">üåê</span>
        <span id="t-open-online">–û—Ç–∫—Ä—ã—Ç—å –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é</span>
      </button>
    </div>

    <!-- Last significant -->
    <div id="lastSignificantWrapper" class="last-significant-card" style="display:none;">
      <div class="last-significant-heading">
        <div class="last-title">
          <span class="pulse-dot"></span>
          <span id="t-last-significant">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–∏–º–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</span>
        </div>
        <span class="badge-danger" id="lastSignificantMagBadge"></span>
      </div>
      <div class="event-header-line">
        <div class="event-timeago" id="lastSignificantTimeago"></div>
      </div>
      <div class="event-second-line" id="lastSignificantSecond"></div>
      <div class="event-third-line" id="lastSignificantThird"></div>
      <div class="event-fourth-line" id="lastSignificantFourth"></div>
    </div>

    <!-- Nearby sections -->
    <div class="card-soft">
      <div class="section-title">
        <span class="icon">üì°</span>
        <span id="t-nearby-hour">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</span>
      </div>
      <div id="listNearHour" class="events-list"></div>
    </div>

    <div class="card-soft">
      <div class="section-title">
        <span class="icon">‚è±Ô∏è</span>
        <span id="t-nearby-day">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</span>
      </div>
      <div id="listNearDay" class="events-list"></div>
    </div>

    <div class="card-soft">
      <div class="section-title">
        <span class="icon">üìÖ</span>
        <span id="t-nearby-week">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏</span>
      </div>
      <div id="listNearWeek" class="events-list"></div>
    </div>

    <div class="card-soft">
      <div class="section-title">
        <span class="icon">üåé</span>
        <span id="t-world-strong">–°–∏–ª—å–Ω—ã–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è –≤ –º–∏—Ä–µ (24 —á–∞—Å–∞)</span>
      </div>
      <div id="listWorldStrong" class="events-list"></div>
    </div>

    <div class="card-soft">
      <div class="section-title">
        <span class="icon">üõ°Ô∏è</span>
        <span id="t-safety-title">–ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</span>
      </div>
      <button class="btn btn-outline" id="btnSafety">
        <span class="btn-icon">üìò</span>
        <span id="t-safety-button">–ö–∞–∫ —Å–µ–±—è –≤–µ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏</span>
      </button>
    </div>

    <div class="footer-note">
      <div id="t-footer-note-1">
        –í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö
        –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
      </div>
      <div id="t-footer-note-2">
        –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞: <a href="https://github.com/zhanat-arch/Seismo-Wake" target="_blank" rel="noopener noreferrer">GitHub / Seismo-Wake</a>.
      </div>
    </div>
  </div>

  <!-- Modals -->

  <!-- Donate -->
  <div id="modalDonateBackdrop" class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">
          <span>‚ù§Ô∏è</span>
          <span id="t-donate-title">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å Seismo-Wake</span>
        </div>
        <button class="modal-close" data-close="modalDonateBackdrop">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="donate-heart">
          <span>‚ù§Ô∏è</span>
        </div>
        <p id="t-donate-text-main">
          –í–∞—à –¥–æ–Ω–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å Seismo-Wake, —É–ª—É—á—à–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –¥–µ–ª–∞—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
          –Ω–∞–¥—ë–∂–Ω–µ–µ. –î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∞—è —Å—É–º–º–∞ –≤–∞–∂–Ω–∞.
        </p>
        <div class="donate-buttons">
          <button class="donate-btn boosty" id="btnBoosty">
            <span>üí≥</span><span id="t-donate-boosty">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π (Boosty)</span>
          </button>
          <button class="donate-btn kofi" id="btnKofi">
            <span>‚òï</span><span id="t-donate-kofi">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ä–µ–∑ PayPal / Ko-fi</span>
          </button>
        </div>
        <div class="donate-small" id="t-donate-small">
          Boosty –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞—Ä—Ç—ã –∏–∑ –º–Ω–æ–≥–∏—Ö —Å—Ç—Ä–∞–Ω. Ko-fi —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å PayPal –∏
          –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ.
        </div>
      </div>
    </div>
  </div>

  <!-- How it works -->
  <div id="modalHowBackdrop" class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">
          <span>‚ÑπÔ∏è</span>
          <span id="t-how-title">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Seismo-Wake</span>
        </div>
        <button class="modal-close" data-close="modalHowBackdrop">‚úï</button>
      </div>
      <div class="modal-body">
        <p id="t-how-p1">
          Seismo-Wake ‚Äî —ç—Ç–æ –ª—ë–≥–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ
          –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ –∏ –ø–æ –º–∏—Ä—É.
        </p>
        <p id="t-how-p2">
          –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—ã–π HTML-—Ñ–∞–π–ª –∏ –∫–∞–∫
          –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA), —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞.
        </p>
        <div class="safety-section-title" id="t-how-sub-geo">
          –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
        </div>
        <ul>
          <li id="t-how-geo-1">–°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ GPS (–µ—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–æ—Å—Ç—É–ø).</li>
          <li id="t-how-geo-2">
            –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –≥–æ—Ä–æ–¥ –≤—Ä—É—á–Ω—É—é –∏–∑ —Å–ø–∏—Å–∫–∞.
          </li>
          <li id="t-how-geo-3">
            –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
            –¥–æ —ç–ø–∏—Ü–µ–Ω—Ç—Ä–æ–≤.
          </li>
        </ul>

        <div class="safety-section-title" id="t-how-sub-refresh">
          –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        </div>
        <ul>
          <li id="t-how-ref-1">
            –î–∞–Ω–Ω—ã–µ –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª –∏
            –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ–∫–∞ –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞.
          </li>
          <li id="t-how-ref-2">
            –ü—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Ñ–æ–Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Å–∏–ª—å–Ω—ã—Ö —Ç–æ–ª—á–∫–∞—Ö
            —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
          </li>
        </ul>

        <div class="safety-section-title" id="t-how-sub-online">
          –û–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        </div>
        <ul>
          <li id="t-how-on-1">
            –°–∞–º–∞—è —Å–≤–µ–∂–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
            <code>https://zhanat-arch.github.io/Seismo-Wake/</code>.
          </li>
          <li id="t-how-on-2">
            –õ–æ–∫–∞–ª—å–Ω—ã–π HTML –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑ GitHub, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–µ–∑
            —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
          </li>
        </ul>

        <div class="how-works-small" id="t-how-small">
          –í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–ø–æ–≤–µ—â–µ–Ω–∏—è. –ü—Ä–∏ –æ—â—É—Ç–∏–º—ã—Ö
          —Ç–æ–ª—á–∫–∞—Ö –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –¥–µ–π—Å—Ç–≤—É–π—Ç–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ú–ß–° –∏ –º–µ—Å—Ç–Ω—ã—Ö —Å–ª—É–∂–±.
        </div>
      </div>
    </div>
  </div>

  <!-- Safety -->
  <div id="modalSafetyBackdrop" class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">
          <span>üõ°Ô∏è</span>
          <span id="t-safety-modal-title">–ö–∞–∫ –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏</span>
        </div>
        <button class="modal-close" data-close="modalSafetyBackdrop">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="safety-section-title" id="t-safety-now">–í–æ –≤—Ä–µ–º—è –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è</div>
        <ul>
          <li id="t-safety-now-1">
            –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ. –ù–µ –±–µ–≥–∏—Ç–µ –∫ –≤—ã—Ö–æ–¥—É, –µ—Å–ª–∏ —Ç–æ–ª—á–∫–∏ —É–∂–µ —Å–∏–ª—å–Ω—ã–µ.
          </li>
          <li id="t-safety-now-2">
            –î–µ—Ä–∂–∏—Ç–µ—Å—å –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –æ–∫–æ–Ω, —Å—Ç–µ–∫–ª–∞, —Ç—è–∂—ë–ª—ã—Ö —à–∫–∞—Ñ–æ–≤ –∏ –ø–æ–¥–≤–µ—Å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
          </li>
          <li id="t-safety-now-3">
            –ï—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–∏–≥–µ–ª–∏ –∏–ª–∏ –Ω–µ—Å—É—â–∏–µ —Å—Ç–µ–Ω—ã, –≤—Å—Ç–∞–Ω—å—Ç–µ —Ä—è–¥–æ–º —Å –Ω–∏–º–∏, –Ω–æ –Ω–µ
            –ø–æ–¥ —Å–∞–º–∏–º —à–∫–∞—Ñ–æ–º –∏–ª–∏ —Å—Ç–µ–∫–ª–æ–º.
          </li>
          <li id="t-safety-now-4">
            –ï—Å–ª–∏ –≤—ã –Ω–∞ —É–ª–∏—Ü–µ ‚Äî –æ—Ç—Ö–æ–¥–∏—Ç–µ –æ—Ç –∑–¥–∞–Ω–∏–π, –≤–∏—Ç—Ä–∏–Ω, —Å—Ç–æ–ª–±–æ–≤ –∏ –ø—Ä–æ–≤–æ–¥–æ–≤.
          </li>
        </ul>

        <div class="safety-section-title" id="t-safety-after">–ü–æ—Å–ª–µ —Ç–æ–ª—á–∫–æ–≤</div>
        <ul>
          <li id="t-safety-after-1">
            –û—Å—Ç–æ—Ä–æ–∂–Ω–æ –æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏–µ. –ù–µ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ª–∏—Ñ—Ç–æ–º, –≤—ã–±–∏—Ä–∞–π—Ç–µ—Å—å –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ.
          </li>
          <li id="t-safety-after-2">
            –ü—Ä–∏ –∑–∞–ø–∞—Ö–µ –≥–∞–∑–∞ –∏–ª–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ —É—Ç–µ—á–∫—É ‚Äî –ø–µ—Ä–µ–∫—Ä–æ–π—Ç–µ –≥–∞–∑ (–µ—Å–ª–∏ —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
            –∏ –≤—ã—Ö–æ–¥–∏—Ç–µ –Ω–∞ —É–ª–∏—Ü—É.
          </li>
          <li id="t-safety-after-3">
            –ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —Ç–æ–ª—á–∫–∞–º, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å —Å—Ä–∞–∑—É –ø–æ–¥ —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
            –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
          </li>
        </ul>

        <div class="safety-section-title" id="t-safety-home">–ï—Å–ª–∏ –≤—ã –¥–æ–º–∞</div>
        <ul>
          <li id="t-safety-home-1">
            –ù–µ —Å—Ç–æ–π—Ç–µ –≤ –¥–≤–µ—Ä–Ω–æ–º –ø—Ä–æ—ë–º–µ, –µ—Å–ª–∏ –¥–≤–µ—Ä—å –ª—ë–≥–∫–∞—è –∏ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∞ –Ω–µ –Ω–µ—Å—É—â–∞—è.
          </li>
          <li id="t-safety-home-2">
            –ó–∞–∫—Ä–æ–π—Ç–µ –≥–∞–∑, –≤—ã–∫–ª—é—á–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–æ–µ –ø–ª–∞–º—è, –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä—ã.
          </li>
          <li id="t-safety-home-3">
            –î–µ—Ä–∂–∏—Ç–µ —Ä—è–¥–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤–æ–¥—É –∏ –±–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä –≤–µ—â–µ–π –Ω–∞ —Å–ª—É—á–∞–π —ç–≤–∞–∫—É–∞—Ü–∏–∏.
          </li>
        </ul>

        <div class="safety-section-title" id="t-safety-out">–ï—Å–ª–∏ –≤—ã –Ω–∞ —É–ª–∏—Ü–µ –∏–ª–∏ –≤ –º–∞—à–∏–Ω–µ</div>
        <ul>
          <li id="t-safety-out-1">
            –û—Ç–æ–π–¥–∏—Ç–µ –æ—Ç —Ñ–∞—Å–∞–¥–æ–≤ –∑–¥–∞–Ω–∏–π, –º–æ—Å—Ç–æ–≤, —Ç–æ–Ω–Ω–µ–ª–µ–π –∏ –ª–∏–Ω–∏–π —ç–ª–µ–∫—Ç—Ä–æ–ø–µ—Ä–µ–¥–∞—á–∏.
          </li>
          <li id="t-safety-out-2">
            –í –º–∞—à–∏–Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –≤–¥–∞–ª–∏ –æ—Ç –ø—É—Ç–µ–ø—Ä–æ–≤–æ–¥–æ–≤ –∏ –∑–¥–∞–Ω–∏–π –∏ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è
            –≤–Ω—É—Ç—Ä–∏ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–æ–ª—á–∫–æ–≤.
          </li>
        </ul>

        <div class="how-works-small" id="t-safety-small">
          –≠—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–æ—Å—è—Ç –æ–±—â–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
          —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–ª—É–∂–±.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------------------------
    // Translations (RU / EN / KZ)
    // ---------------------------

    const translations = {
      ru: {
        appTitle: "Seismo-Wake",
        subtitle: "–†–∞–Ω–Ω–µ–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Ç–æ–ª—á–∫–∞—Ö –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        appMode: "–û–Ω–ª–∞–π–Ω-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥",
        updatedLabel: "–û–±–Ω–æ–≤–ª–µ–Ω–æ:",
        btnRefresh: "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
        btnInstall: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
        btnDonate: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
        btnHow: "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",
        yourRegion: "–í–∞—à —Ä–µ–≥–∏–æ–Ω:",
        liveLabel: "–í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏",
        cityPlaceholder: "–ê–ª–º–∞—Ç—ã, –¢–æ–∫–∏–æ, –°—Ç–∞–º–±—É–ª‚Ä¶",
        useMyLocation: "–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
        cityError:
          "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤. –ù–∞–∂–º–∏—Ç–µ —Å—Ç—Ä–µ–ª–æ—á–∫—É:",
        openOnline: "–û—Ç–∫—Ä—ã—Ç—å –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—é",
        lastSignificant: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–∏–º–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        nearbyHour: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        nearbyDay: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        nearbyWeek: "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏",
        worldStrong: "–°–∏–ª—å–Ω—ã–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è –≤ –º–∏—Ä–µ (24 —á–∞—Å–∞)",
        safetyTitle: "–ü–∞–º—è—Ç–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        safetyButton: "–ö–∞–∫ —Å–µ–±—è –≤–µ—Å—Ç–∏ –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏",
        footer1:
          "–í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.",
        footer2: "–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞:",
        donateTitle: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å Seismo-Wake",
        donateTextMain:
          "–í–∞—à –¥–æ–Ω–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å Seismo-Wake, —É–ª—É—á—à–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –¥–µ–ª–∞—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –Ω–∞–¥—ë–∂–Ω–µ–µ. –î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∞—è —Å—É–º–º–∞ –≤–∞–∂–Ω–∞.",
        donateBoosty: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π (Boosty)",
        donateKofi: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ä–µ–∑ PayPal / Ko-fi",
        donateSmall:
          "Boosty –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞—Ä—Ç—ã –∏–∑ –º–Ω–æ–≥–∏—Ö —Å—Ç—Ä–∞–Ω. Ko-fi —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å PayPal –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ.",
        howTitle: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Seismo-Wake",
        howP1:
          "Seismo-Wake ‚Äî —ç—Ç–æ –ª—ë–≥–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ –∏ –ø–æ –º–∏—Ä—É.",
        howP2:
          "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—ã–π HTML-—Ñ–∞–π–ª –∏ –∫–∞–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA), —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞.",
        howSubGeo: "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è",
        howGeo1:
          "–°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ GPS (–µ—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–æ—Å—Ç—É–ø).",
        howGeo2:
          "–ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –≥–æ—Ä–æ–¥ –≤—Ä—É—á–Ω—É—é –∏–∑ —Å–ø–∏—Å–∫–∞.",
        howGeo3:
          "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ —ç–ø–∏—Ü–µ–Ω—Ç—Ä–æ–≤.",
        howSubRefresh: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö",
        howRef1:
          "–î–∞–Ω–Ω—ã–µ –æ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è—Ö –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ–∫–∞ –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞.",
        howRef2:
          "–ü—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Ñ–æ–Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Å–∏–ª—å–Ω—ã—Ö —Ç–æ–ª—á–∫–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.",
        howSubOnline: "–û–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è",
        howOn1:
          "–°–∞–º–∞—è —Å–≤–µ–∂–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: https://zhanat-arch.github.io/Seismo-Wake/.",
        howOn2:
          "–õ–æ–∫–∞–ª—å–Ω—ã–π HTML –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑ GitHub, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.",
        howSmall:
          "–í–∞–∂–Ω–æ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–ø–æ–≤–µ—â–µ–Ω–∏—è. –ü—Ä–∏ –æ—â—É—Ç–∏–º—ã—Ö —Ç–æ–ª—á–∫–∞—Ö –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –¥–µ–π—Å—Ç–≤—É–π—Ç–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ú–ß–° –∏ –º–µ—Å—Ç–Ω—ã—Ö —Å–ª—É–∂–±.",
        safetyModalTitle: "–ö–∞–∫ –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø—Ä–∏ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–∏",
        safetyNow: "–í–æ –≤—Ä–µ–º—è –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è",
        safetyNow1:
          "–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ. –ù–µ –±–µ–≥–∏—Ç–µ –∫ –≤—ã—Ö–æ–¥—É, –µ—Å–ª–∏ —Ç–æ–ª—á–∫–∏ —É–∂–µ —Å–∏–ª—å–Ω—ã–µ.",
        safetyNow2:
          "–î–µ—Ä–∂–∏—Ç–µ—Å—å –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –æ–∫–æ–Ω, —Å—Ç–µ–∫–ª–∞, —Ç—è–∂—ë–ª—ã—Ö —à–∫–∞—Ñ–æ–≤ –∏ –ø–æ–¥–≤–µ—Å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.",
        safetyNow3:
          "–ï—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–∏–≥–µ–ª–∏ –∏–ª–∏ –Ω–µ—Å—É—â–∏–µ —Å—Ç–µ–Ω—ã, –≤—Å—Ç–∞–Ω—å—Ç–µ —Ä—è–¥–æ–º —Å –Ω–∏–º–∏, –Ω–æ –Ω–µ –ø–æ–¥ —à–∫–∞—Ñ–æ–º –∏–ª–∏ —Å—Ç–µ–∫–ª–æ–º.",
        safetyNow4:
          "–ï—Å–ª–∏ –≤—ã –Ω–∞ —É–ª–∏—Ü–µ ‚Äî –æ—Ç—Ö–æ–¥–∏—Ç–µ –æ—Ç –∑–¥–∞–Ω–∏–π, –≤–∏—Ç—Ä–∏–Ω, —Å—Ç–æ–ª–±–æ–≤ –∏ –ø—Ä–æ–≤–æ–¥–æ–≤.",
        safetyAfter: "–ü–æ—Å–ª–µ —Ç–æ–ª—á–∫–æ–≤",
        safetyAfter1:
          "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ –æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏–µ. –ù–µ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ª–∏—Ñ—Ç–æ–º, –≤—ã–±–∏—Ä–∞–π—Ç–µ—Å—å –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ.",
        safetyAfter2:
          "–ü—Ä–∏ –∑–∞–ø–∞—Ö–µ –≥–∞–∑–∞ –∏–ª–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ —É—Ç–µ—á–∫—É ‚Äî –ø–µ—Ä–µ–∫—Ä–æ–π—Ç–µ –≥–∞–∑ (–µ—Å–ª–∏ —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ) –∏ –≤—ã—Ö–æ–¥–∏—Ç–µ –Ω–∞ —É–ª–∏—Ü—É.",
        safetyAfter3:
          "–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —Ç–æ–ª—á–∫–∞–º, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å —Å—Ä–∞–∑—É –ø–æ–¥ —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.",
        safetyHome: "–ï—Å–ª–∏ –≤—ã –¥–æ–º–∞",
        safetyHome1:
          "–ù–µ —Å—Ç–æ–π—Ç–µ –≤ –¥–≤–µ—Ä–Ω–æ–º –ø—Ä–æ—ë–º–µ, –µ—Å–ª–∏ –¥–≤–µ—Ä—å –ª—ë–≥–∫–∞—è –∏ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∞ –Ω–µ –Ω–µ—Å—É—â–∞—è.",
        safetyHome2:
          "–ó–∞–∫—Ä–æ–π—Ç–µ –≥–∞–∑, –≤—ã–∫–ª—é—á–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–æ–µ –ø–ª–∞–º—è, –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä—ã.",
        safetyHome3:
          "–î–µ—Ä–∂–∏—Ç–µ —Ä—è–¥–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤–æ–¥—É –∏ –±–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä –≤–µ—â–µ–π –Ω–∞ —Å–ª—É—á–∞–π —ç–≤–∞–∫—É–∞—Ü–∏–∏.",
        safetyOut: "–ï—Å–ª–∏ –≤—ã –Ω–∞ —É–ª–∏—Ü–µ –∏–ª–∏ –≤ –º–∞—à–∏–Ω–µ",
        safetyOut1:
          "–û—Ç–æ–π–¥–∏—Ç–µ –æ—Ç —Ñ–∞—Å–∞–¥–æ–≤ –∑–¥–∞–Ω–∏–π, –º–æ—Å—Ç–æ–≤, —Ç–æ–Ω–Ω–µ–ª–µ–π –∏ –ª–∏–Ω–∏–π —ç–ª–µ–∫—Ç—Ä–æ–ø–µ—Ä–µ–¥–∞—á–∏.",
        safetyOut2:
          "–í –º–∞—à–∏–Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –≤–¥–∞–ª–∏ –æ—Ç –ø—É—Ç–µ–ø—Ä–æ–≤–æ–¥–æ–≤ –∏ –∑–¥–∞–Ω–∏–π –∏ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–æ–ª—á–∫–æ–≤.",
        safetySmall:
          "–≠—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–æ—Å—è—Ç –æ–±—â–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–ª—É–∂–±.",
        geoSearching: "–û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ‚Ä¶",
        geoDenied:
          "–î–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø.",
        geoFallback: "",
        noEventsNearby: "–°–æ–±—ã—Ç–∏–π –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.",
        loading: "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚Ä¶",
        timeJustNow: "–¢–æ–ª—å–∫–æ —á—Ç–æ",
        timeMinutesAgo: m => `${m} –º–∏–Ω –Ω–∞–∑–∞–¥`,
        timeHoursAgo: h => `${h} —á –Ω–∞–∑–∞–¥`,
        timeDaysAgo: d => `${d} –¥–Ω –Ω–∞–∑–∞–¥`,
        magLabel: m => `–ú–æ—â–Ω–æ—Å—Ç—å: M${m}`,
        distDepth: (dist, depth) =>
          `~${dist} –∫–º –æ—Ç –≤–∞—Å ¬∑ –≥–ª—É–±–∏–Ω–∞ ~${depth} –∫–º`,
        regionLabel: place => `–†–µ–≥–∏–æ–Ω: ${place}`,
        dateTimeLabel: txt => `–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è: ${txt}`
      },
      en: {
        appTitle: "Seismo-Wake",
        subtitle: "Early awareness of nearby earthquakes",
        appMode: "Online monitoring",
        updatedLabel: "Updated:",
        btnRefresh: "Refresh data",
        btnInstall: "Install app",
        btnDonate: "Support project",
        btnHow: "How it works",
        yourRegion: "Your region:",
        liveLabel: "Live",
        cityPlaceholder: "Almaty, Tokyo, Istanbul‚Ä¶",
        useMyLocation: "Use my location",
        cityError:
          "Failed to load city list. Tap the arrow to open online version:",
        openOnline: "Open online version",
        lastSignificant: "Last significant nearby event",
        nearbyHour: "Last hour nearby",
        nearbyDay: "Last 24 hours nearby",
        nearbyWeek: "Last week nearby",
        worldStrong: "Strong quakes worldwide (24h)",
        safetyTitle: "Safety reminder",
        safetyButton: "Earthquake safety tips",
        footer1:
          "Note: the app runs locally, but you need internet to load up-to-date earthquake data.",
        footer2: "Project code:",
        donateTitle: "Support Seismo-Wake",
        donateTextMain:
          "Your donation helps improve Seismo-Wake, make alerts more reliable and keep development going. Any amount matters.",
        donateBoosty: "Support with bank card (Boosty)",
        donateKofi: "Support via PayPal / Ko-fi",
        donateSmall:
          "Boosty accepts many local cards. Ko-fi is convenient with PayPal and international cards. You can stay anonymous.",
        howTitle: "How Seismo-Wake works",
        howP1:
          "Seismo-Wake is a lightweight web app that fetches public earthquake data and shows nearby and global activity.",
        howP2:
          "It can work as a normal web page, a local HTML file, and as a Progressive Web App (PWA) installed on your home screen.",
        howSubGeo: "Location detection",
        howGeo1:
          "First we try GPS (if you granted permission).",
        howGeo2:
          "If geolocation is blocked, you can select a city manually from the list.",
        howGeo3:
          "Coordinates are used only locally in your browser to compute distance to epicenters.",
        howSubRefresh: "Data refresh",
        howRef1:
          "Data is refreshed when you press ‚ÄúRefresh‚Äù and periodically while the tab is active.",
        howRef2:
          "Push notifications and background work are not implemented yet, so in case of strong shaking please check updates manually.",
        howSubOnline: "Online version & updates",
        howOn1:
          "The latest version is always available at: https://zhanat-arch.github.io/Seismo-Wake/.",
        howOn2:
          "You can re-download the HTML from GitHub to update a local copy without installation.",
        howSmall:
          "Important: this tool does not replace official alert systems. Always follow instructions from local emergency services.",
        safetyModalTitle: "Earthquake safety guide",
        safetyNow: "During the quake",
        safetyNow1:
          "Stay as calm as possible. Do not rush to exits once shaking is already strong.",
        safetyNow2:
          "Stay away from windows, glass, heavy cabinets and hanging objects.",
        safetyNow3:
          "If you know where structural walls or beams are, stand near them, not under a cabinet or glass.",
        safetyNow4:
          "If you are outside, move away from buildings, shop windows, poles and wires.",
        safetyAfter: "After the shaking",
        safetyAfter1:
          "Carefully inspect the area. Do not use elevators, use stairs.",
        safetyAfter2:
          "If you smell gas or suspect a leak, close the gas (if safe) and go outside.",
        safetyAfter3:
          "Be prepared for aftershocks, do not immediately return under damaged structures.",
        safetyHome: "If you are at home",
        safetyHome1:
          "Do not stand in a light, non-structural doorway.",
        safetyHome2:
          "Turn off gas and open flames; switch off electric appliances if possible.",
        safetyHome3:
          "Keep phone, documents, water and a small go-bag handy in case of evacuation.",
        safetyOut: "If you are outside or in a car",
        safetyOut1:
          "Move away from building facades, bridges, tunnels and power lines.",
        safetyOut2:
          "If in a car, pull over away from structures and stay inside until shaking stops.",
        safetySmall:
          "These tips are general and do not replace advice from professional rescue services.",
        geoSearching: "Detecting your location‚Ä¶",
        geoDenied:
          "Geolocation is blocked. Choose a city manually or allow access.",
        geoFallback: "",
        noEventsNearby: "No nearby events found yet.",
        loading: "Loading data‚Ä¶",
        timeJustNow: "Just now",
        timeMinutesAgo: m => `${m} min ago`,
        timeHoursAgo: h => `${h} h ago`,
        timeDaysAgo: d => `${d} d ago`,
        magLabel: m => `Magnitude: M${m}`,
        distDepth: (dist, depth) =>
          `~${dist} km from you ¬∑ depth ~${depth} km`,
        regionLabel: place => `Region: ${place}`,
        dateTimeLabel: txt => `Event time: ${txt}`
      },
      kk: {
        appTitle: "Seismo-Wake",
        subtitle: "–ñ–∞“õ—ã–Ω –º–∞“£–¥–∞“ì—ã –∂–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—ñ —Ç—É—Ä–∞–ª—ã –∂–µ–¥–µ–ª –∞“õ–ø–∞—Ä–∞—Ç",
        appMode: "–û–Ω–ª–∞–π–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥",
        updatedLabel: "–ñ–∞“£–∞—Ä—Ç—ã–ª“ì–∞–Ω —É–∞“õ—ã—Ç—ã:",
        btnRefresh: "–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –∂–∞“£–∞—Ä—Ç—É",
        btnInstall: "“ö–æ—Å—ã–º—à–∞–Ω—ã –æ—Ä–Ω–∞—Ç—É",
        btnDonate: "–ñ–æ–±–∞–Ω—ã “õ–æ–ª–¥–∞—É",
        btnHow: "“ö–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ",
        yourRegion: "–°—ñ–∑–¥—ñ“£ –∞–π–º–∞“õ:",
        liveLabel: "–û–Ω–ª–∞–π–Ω",
        cityPlaceholder: "–ê–ª–º–∞—Ç—ã, –¢–æ–∫–∏–æ, –´—Å—Ç–∞–º–±“±–ª‚Ä¶",
        useMyLocation: "–û—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω –∂–µ—Ä—ñ–º",
        cityError:
          "“ö–∞–ª–∞–ª–∞—Ä —Ç—ñ–∑—ñ–º—ñ–Ω –∂“Ø–∫—Ç–µ—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –û–Ω–ª–∞–π–Ω –Ω“±—Å“õ–∞–Ω—ã –∞—à—É “Ø—à—ñ–Ω –∫”©—Ä—Å–µ—Ç–∫—ñ–Ω—ñ –±–∞—Å—ã“£—ã–∑:",
        openOnline: "–û–Ω–ª–∞–π–Ω –Ω“±—Å“õ–∞–Ω—ã –∞—à—É",
        lastSignificant: "–ñ–∞“õ—ã–Ω–¥–∞“ì—ã –º–∞“£—ã–∑–¥—ã –æ“õ–∏“ì–∞",
        nearbyHour: "–°–æ“£“ì—ã —Å–∞“ì–∞—Ç—Ç–∞“ì—ã –∂–∞“õ—ã–Ω –æ“õ–∏“ì–∞–ª–∞—Ä",
        nearbyDay: "–°–æ“£“ì—ã —Ç”ô—É–ª—ñ–∫—Ç–µ–≥—ñ –∂–∞“õ—ã–Ω –æ“õ–∏“ì–∞–ª–∞—Ä",
        nearbyWeek: "–°–æ“£“ì—ã –∞–ø—Ç–∞–¥–∞“ì—ã –∂–∞“õ—ã–Ω –æ“õ–∏“ì–∞–ª–∞—Ä",
        worldStrong: "”ò–ª–µ–º–¥–µ–≥—ñ –∫“Ø—à—Ç—ñ –∂–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—Ç–µ—Ä—ñ (24 —Å–∞“ì)",
        safetyTitle: "“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ –µ—Ä–µ–∂–µ–ª–µ—Ä—ñ",
        safetyButton: "–ñ–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—ñ –∫–µ–∑—ñ–Ω–¥–µ–≥—ñ ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Ä",
        footer1:
          "–ú–∞“£—ã–∑–¥—ã: “õ–æ—Å—ã–º—à–∞ –∂–µ—Ä–≥—ñ–ª—ñ–∫—Ç—ñ —Ç“Ø—Ä–¥–µ —ñ—Å–∫–µ “õ–æ—Å—ã–ª–∞–¥—ã, –±—ñ—Ä–∞“õ –∂–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—ñ —Ç—É—Ä–∞–ª—ã –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∞–ª—É “Ø—à—ñ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞–∂–µ—Ç.",
        footer2: "–ñ–æ–±–∞ –∫–æ–¥—ã:",
        donateTitle: "Seismo-Wake –∂–æ–±–∞—Å—ã–Ω “õ–æ–ª–¥–∞—É",
        donateTextMain:
          "–°—ñ–∑–¥—ñ“£ –∫”©–º–µ–≥—ñ“£—ñ–∑ Seismo-Wake –∂“Ø–π–µ—Å—ñ–Ω –¥–∞–º—ã—Ç—É“ì–∞, –∞–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–¥—ñ –∂–∞“õ—Å–∞—Ä—Ç—É“ì–∞ –∂”ô–Ω–µ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã —Å–µ–Ω—ñ–º–¥—ñ –µ—Ç—É–≥–µ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ–¥—ñ.",
        donateBoosty: "–ë–∞–Ω–∫ –∫–∞—Ä—Ç–∞—Å—ã –∞—Ä“õ—ã–ª—ã “õ–æ–ª–¥–∞—É (Boosty)",
        donateKofi: "PayPal / Ko-fi –∞—Ä“õ—ã–ª—ã “õ–æ–ª–¥–∞—É",
        donateSmall:
          "Boosty –∫”©–ø—Ç–µ–≥–µ–Ω –µ–ª–¥–µ—Ä–¥—ñ“£ –∫–∞—Ä—Ç–∞–ª–∞—Ä—ã–Ω “õ–∞–±—ã–ª–¥–∞–π–¥—ã. Ko-fi ‚Äî PayPal –∂”ô–Ω–µ —Ö–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ –∫–∞—Ä—Ç–∞–ª–∞—Ä“ì–∞ —ã“£“ì–∞–π–ª—ã.",
        howTitle: "Seismo-Wake “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ",
        howP1:
          "Seismo-Wake ‚Äî –∞—à—ã“õ –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –ø–∞–π–¥–∞–ª–∞–Ω—ã–ø, –∂–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—Ç–µ—Ä—ñ —Ç—É—Ä–∞–ª—ã –∞“õ–ø–∞—Ä–∞—Ç –±–µ—Ä–µ—Ç—ñ–Ω –∂–µ“£—ñ–ª –≤–µ–±-“õ–æ—Å—ã–º—à–∞.",
        howP2:
          "–û–ª –≤–µ–±-–±–µ—Ç —Ä–µ—Ç—ñ–Ω–¥–µ –¥–µ, –∂–µ—Ä–≥—ñ–ª—ñ–∫—Ç—ñ HTML —Ñ–∞–π–ª —Ä–µ—Ç—ñ–Ω–¥–µ –¥–µ, —Å–æ–Ω–¥–∞–π-–∞“õ –±–∞—Å—Ç—ã —ç–∫—Ä–∞–Ω“ì–∞ –æ—Ä–Ω–∞—Ç—ã–ª–∞—Ç—ã–Ω PWA —Ä–µ—Ç—ñ–Ω–¥–µ –¥–µ –∂“±–º—ã—Å —ñ—Å—Ç–µ–π –∞–ª–∞–¥—ã.",
        howSubGeo: "–û—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω –∂–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞—É",
        howGeo1:
          "–ê–ª–¥—ã–º–µ–Ω GPS –∞—Ä“õ—ã–ª—ã –∞–Ω—ã“õ—Ç–∞—É“ì–∞ —Ç—ã—Ä—ã—Å–∞–º—ã–∑ (–µ–≥–µ—Ä —Ä“±“õ—Å–∞—Ç –±–µ—Ä—ñ–ª—Å–µ).",
        howGeo2:
          "–ï–≥–µ—Ä –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è ”©—à—ñ—Ä—ñ–ª–≥–µ–Ω –±–æ–ª—Å–∞, “õ–∞–ª–∞–Ω—ã —Ç—ñ–∑—ñ–º–Ω–µ–Ω “õ–æ–ª–º–µ–Ω —Ç–∞“£–¥–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.",
        howGeo3:
          "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—Ç–∞—Ä —Ç–µ–∫ —Å—ñ–∑–¥—ñ“£ –±—Ä–∞—É–∑–µ—Ä—ñ“£—ñ–∑–¥–µ —ç–ø–∏—Ü–µ–Ω—Ç—Ä–≥–µ –¥–µ–π—ñ–Ω–≥—ñ “õ–∞—à—ã“õ—Ç—ã“õ—Ç—ã –µ—Å–µ–ø—Ç–µ—É “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.",
        howSubRefresh: "–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂–∞“£–∞—Ä—Ç—É",
        howRef1:
          "–î–µ—Ä–µ–∫—Ç–µ—Ä ¬´–ñ–∞“£–∞—Ä—Ç—É¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å“õ–∞–Ω–¥–∞ –∂”ô–Ω–µ –±–µ—Ç –±–µ–ª—Å–µ–Ω–¥—ñ —Ç“±—Ä“ì–∞–Ω–¥–∞ –º–µ—Ä–∑—ñ–º–¥—ñ —Ç“Ø—Ä–¥–µ –∂–∞“£–∞—Ä—Ç—ã–ª–∞–¥—ã.",
        howRef2:
          "–•–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä –º–µ–Ω —Ñ–æ–Ω–¥—ã“õ —Ä–µ–∂–∏–º ”ô–∑—ñ—Ä–≥–µ –∂–æ“õ, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –∫“Ø—à—Ç—ñ –¥“Ø–º–ø—É–ª–µ—Ä –∫–µ–∑—ñ–Ω–¥–µ –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ ”©–∑—ñ“£—ñ–∑ —Ç–µ–∫—Å–µ—Ä–≥–µ–Ω –¥“±—Ä—ã—Å.",
        howSubOnline: "–û–Ω–ª–∞–π–Ω –Ω“±—Å“õ–∞ –∂”ô–Ω–µ –∂–∞“£–∞—Ä—Ç—É–ª–∞—Ä",
        howOn1:
          "–ï“£ —Å–æ“£“ì—ã –Ω“±—Å“õ–∞ ”ô—Ä“õ–∞—à–∞–Ω –º—ã–Ω–∞ –∂–µ—Ä–¥–µ: https://zhanat-arch.github.io/Seismo-Wake/.",
        howOn2:
          "–ñ–µ—Ä–≥—ñ–ª—ñ–∫—Ç—ñ HTML —Ñ–∞–π–ª—ã–Ω –∂–∞“£–∞—Ä—Ç—É “Ø—à—ñ–Ω GitHub-—Ç–∞–Ω “õ–∞–π—Ç–∞ –∂“Ø–∫—Ç–µ—É–≥–µ –±–æ–ª–∞–¥—ã.",
        howSmall:
          "–ú–∞“£—ã–∑–¥—ã: –±“±–ª “õ“±—Ä–∞–ª —Ä–µ—Å–º–∏ –µ—Å–∫–µ—Ä—Ç—É –∂“Ø–π–µ–ª–µ—Ä—ñ–Ω—ñ“£ –æ—Ä–Ω—ã–Ω –±–∞—Å–ø–∞–π–¥—ã. ”ò—Ä“õ–∞—à–∞–Ω —Ç”©—Ç–µ–Ω—à–µ “õ—ã–∑–º–µ—Ç—Ç–µ—Ä–¥—ñ“£ –Ω“±—Å“õ–∞—É–ª–∞—Ä—ã–Ω –æ—Ä—ã–Ω–¥–∞“£—ã–∑.",
        safetyModalTitle: "–ñ–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—ñ –∫–µ–∑—ñ–Ω–¥–µ–≥—ñ ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Ä",
        safetyNow: "–ñ–µ—Ä —Å—ñ–ª–∫—ñ–Ω—ñ—Å—ñ –∫–µ–∑—ñ–Ω–¥–µ",
        safetyNow1:
          "–ú“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ–Ω—à–µ —Å–∞–±—ã—Ä —Å–∞“õ—Ç–∞“£—ã–∑. –î“Ø–º–ø—É–ª–µ—Ä –∫“Ø—à–µ–π–≥–µ–Ω–¥–µ, –±—ñ—Ä–¥–µ–Ω –µ—Å—ñ–∫–∫–µ –∂“Ø–≥—ñ—Ä–º–µ“£—ñ–∑.",
        safetyNow2:
          "–¢–µ—Ä–µ–∑–µ–ª–µ—Ä–¥–µ–Ω, —à—ã–Ω—ã–¥–∞–Ω, –∞—É—ã—Ä —à–∫–∞—Ñ—Ç–∞—Ä–¥–∞–Ω –∂”ô–Ω–µ —ñ–ª—É–ª—ñ –∑–∞—Ç—Ç–∞—Ä–¥–∞–Ω –∞–ª—ã—Å —Ç“±—Ä—ã“£—ã–∑.",
        safetyNow3:
          "–ï–≥–µ—Ä —Ä–∏–≥–µ–ª—å–¥–µ—Ä –Ω–µ–º–µ—Å–µ –Ω–µ–≥—ñ–∑–≥—ñ “õ–∞–±—ã—Ä“ì–∞–ª–∞—Ä–¥—ã“£ –æ—Ä–Ω—ã–Ω –±—ñ–ª—Å–µ“£—ñ–∑, —Å–æ–ª–∞—Ä–¥—ã“£ –∂–∞–Ω—ã–Ω–∞ —Ç“±—Ä—ã“£—ã–∑, –±—ñ—Ä–∞“õ —à–∫–∞—Ñ—Ç—ã“£ –Ω–µ–º–µ—Å–µ ”ô–π–Ω–µ–∫—Ç—ñ“£ –∞—Å—Ç—ã–Ω–∞ –µ–º–µ—Å.",
        safetyNow4:
          "–°—ã—Ä—Ç—Ç–∞ –±–æ–ª—Å–∞“£—ã–∑, “ì–∏–º–∞—Ä–∞—Ç—Ç–∞—Ä–¥–∞–Ω, –≤–∏—Ç—Ä–∏–Ω–∞–ª–∞—Ä–¥–∞–Ω, –±–∞“ì–∞–Ω–¥–∞—Ä–¥–∞–Ω –∂”ô–Ω–µ —Å—ã–º–¥–∞—Ä–¥–∞–Ω –∞–ª—ã—Å—Ç–∞“£—ã–∑.",
        safetyAfter: "–î“Ø–º–ø—É —Ç–æ“õ—Ç–∞“ì–∞–Ω–Ω–∞–Ω –∫–µ–π—ñ–Ω",
        safetyAfter1:
          "“í–∏–º–∞—Ä–∞—Ç—Ç—ã –∞–±–∞–π–ª–∞–ø —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑. –õ–∏—Ñ—Ç “õ–æ–ª–¥–∞–Ω–±–∞“£—ã–∑, –±–∞—Å–ø–∞–ª–¥–∞“õ—Ç—ã –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑.",
        safetyAfter2:
          "–ì–∞–∑ –∏—ñ—Å—ñ —Å–µ–∑—ñ–ª—Å–µ –Ω–µ–º–µ—Å–µ –∞“ì—ã–ø –∫–µ—Ç—É–≥–µ –∫“Ø–º”ô–Ω–¥–∞–Ω—Å–∞“£—ã–∑, –≥–∞–∑–¥—ã –∂–∞–±—ã“£—ã–∑ (“õ–∞—É—ñ–ø—Å—ñ–∑ –±–æ–ª—Å–∞) –∂”ô–Ω–µ —Å—ã—Ä—Ç“õ–∞ —à—ã“ì—ã“£—ã–∑.",
        safetyAfter3:
          "“ö–∞–π—Ç–∞ –¥“Ø–º–ø—É–ª–µ—Ä –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω ”ô–ª—Å—ñ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–ª–∞—Ä“ì–∞ –±—ñ—Ä–¥–µ–Ω –æ—Ä–∞–ª–º–∞“£—ã–∑.",
        safetyHome: "“Æ–π–¥–µ –±–æ–ª—Å–∞“£—ã–∑",
        safetyHome1:
          "–ñ–µ“£—ñ–ª –µ—Å—ñ–∫—Ç–µ—Ä—ñ –±–∞—Ä –µ—Å—ñ–∫ –æ–π—ã“ì—ã–Ω–¥–∞ —Ç“±—Ä—É “õ–∞—É—ñ–ø—Ç—ñ ‚Äî –æ–ª ”ô—Ä“õ–∞—à–∞–Ω –±–µ—Ä—ñ–∫ –µ–º–µ—Å.",
        safetyHome2:
          "–ì–∞–∑–¥—ã –∂–∞–±—ã“£—ã–∑, –∞—à—ã“õ –æ—Ç—Ç—ã ”©—à—ñ—Ä—ñ“£—ñ–∑, –º“Ø–º–∫—ñ–Ω –±–æ–ª—Å–∞ —ç–ª–µ–∫—Ç—Ä “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã–Ω –∞–∂—ã—Ä–∞—Ç—ã“£—ã–∑.",
        safetyHome3:
          "–¢–µ–ª–µ—Ñ–æ–Ω–¥—ã, “õ“±–∂–∞—Ç—Ç–∞—Ä–¥—ã, —Å—É –º–µ–Ω —à–∞“ì—ã–Ω –∫–µ—Ä–µ–∫-–∂–∞—Ä–∞“õ —Å”©–º–∫–µ—Å—ñ–Ω “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ –∂–µ—Ä–¥–µ “±—Å—Ç–∞“£—ã–∑.",
        safetyOut: "–°—ã—Ä—Ç—Ç–∞ –Ω–µ–º–µ—Å–µ –∫”©–ª—ñ–∫—Ç–µ –±–æ–ª—Å–∞“£—ã–∑",
        safetyOut1:
          "“í–∏–º–∞—Ä–∞—Ç—Ç–∞—Ä–¥—ã“£ “õ–∞—Å–±–µ—Ç—Ç–µ—Ä—ñ–Ω–µ–Ω, –∫”©–ø—ñ—Ä–ª–µ—Ä–¥–µ–Ω, —Ç–æ–Ω–Ω–µ–ª—å–¥–µ—Ä–¥–µ–Ω –∂”ô–Ω–µ —ç–ª–µ–∫—Ç—Ä –∂–µ–ª—ñ–ª–µ—Ä—ñ–Ω–µ–Ω –∞–ª—ã—Å—Ç–∞“£—ã–∑.",
        safetyOut2:
          "–ö”©–ª—ñ–∫—Ç–µ –±–æ–ª—Å–∞“£—ã–∑, –∫”©–ø—ñ—Ä–ª–µ—Ä –º–µ–Ω “ì–∏–º–∞—Ä–∞—Ç—Ç–∞—Ä–¥–∞–Ω –∞–ª—ã—Å –∂–µ—Ä–≥–µ —Ç–æ“õ—Ç–∞–ø, –¥“Ø–º–ø—É –±–∞—Å—ã–ª“ì–∞–Ω—à–∞ –∫”©–ª—ñ–∫—Ç—ñ“£ —ñ—à—ñ–Ω–¥–µ –±–æ–ª—ã“£—ã–∑.",
        safetySmall:
          "–ë“±–ª –∫–µ“£–µ—Å—Ç–µ—Ä –∂–∞–ª–ø—ã —Å–∏–ø–∞—Ç—Ç–∞, —Ç”©—Ç–µ–Ω—à–µ “õ—ã–∑–º–µ—Ç—Ç–µ—Ä–¥—ñ“£ —Ä–µ—Å–º–∏ –Ω“±—Å“õ–∞—É–ª–∞—Ä—ã–Ω—ã“£ –æ—Ä–Ω—ã–Ω –±–∞—Å–ø–∞–π–¥—ã.",
        geoSearching: "–û—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω –∂–µ—Ä –∞–Ω—ã“õ—Ç–∞–ª—É–¥–∞‚Ä¶",
        geoDenied:
          "–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è“ì–∞ —Ä“±“õ—Å–∞—Ç –∂–æ“õ. “ö–∞–ª–∞–Ω—ã —Ç—ñ–∑—ñ–º–Ω–µ–Ω —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ —Ä“±“õ—Å–∞—Ç –±–µ—Ä—ñ“£—ñ–∑.",
        geoFallback: "",
        noEventsNearby: "–ñ–∞“õ—ã–Ω –º–∞“£–¥–∞ –æ“õ–∏“ì–∞–ª–∞—Ä —Ç–∞–±—ã–ª“ì–∞–Ω –∂–æ“õ.",
        loading: "–î–µ—Ä–µ–∫—Ç–µ—Ä –∂“Ø–∫—Ç–µ–ª—É–¥–µ‚Ä¶",
        timeJustNow: "–ñ–∞“£–∞ “ì–∞–Ω–∞",
        timeMinutesAgo: m => `${m} –º–∏–Ω –±“±—Ä—ã–Ω`,
        timeHoursAgo: h => `${h} —Å–∞“ì –±“±—Ä—ã–Ω`,
        timeDaysAgo: d => `${d} –∫“Ø–Ω –±“±—Ä—ã–Ω`,
        magLabel: m => `–ö“Ø—à—ñ: M${m}`,
        distDepth: (dist, depth) =>
          `–°—ñ–∑–¥–µ–Ω —à–∞–º–∞–º–µ–Ω ${dist} –∫–º ¬∑ —Ç–µ—Ä–µ“£–¥—ñ–≥—ñ ~${depth} –∫–º`,
        regionLabel: place => `–ê–π–º–∞“õ: ${place}`,
        dateTimeLabel: txt => `–û“õ–∏“ì–∞ —É–∞“õ—ã—Ç—ã: ${txt}`
      }
    };

    let currentLang = "ru";
    const ONLINE_URL = "https://zhanat-arch.github.io/Seismo-Wake/";
    const CITIES_LOCAL = "./cities.json";
    const CITIES_FALLBACK =
      "https://zhanat-arch.github.io/Seismo-Wake/cities.json";

    let citiesIndex = [];
    let userLocation = null;
    let lastEarthquakes = [];
    let autoRefreshTimer = null;
    let deferredInstallPrompt = null;

    const isLocalContext =
      location.protocol === "file:" || location.href.startsWith("content:");

    // Language application
    function applyTranslations() {
      const tBase =
        translations[currentLang] || translations["en"];

      const setText = (id, key) => {
        const el = document.getElementById(id);
        if (el && tBase[key] !== undefined) el.textContent = tBase[key];
      };

      setText("t-app-title", "appTitle");
      setText("t-subtitle", "subtitle");
      setText("t-app-mode", "appMode");
      setText("t-updated-label", "updatedLabel");
      setText("t-btn-refresh", "btnRefresh");
      setText("t-btn-install", "btnInstall");
      setText("t-btn-donate", "btnDonate");
      setText("t-btn-how", "btnHow");
      setText("t-your-region", "yourRegion");
      setText("t-live-label", "liveLabel");
      setText("t-city-error", "cityError");
      setText("t-open-online", "openOnline");
      setText("t-last-significant", "lastSignificant");
      setText("t-nearby-hour", "nearbyHour");
      setText("t-nearby-day", "nearbyDay");
      setText("t-nearby-week", "nearbyWeek");
      setText("t-world-strong", "worldStrong");
      setText("t-safety-title", "safetyTitle");
      setText("t-safety-button", "safetyButton");
      setText("t-footer-note-1", "footer1");
      const footer2Label = document.getElementById("t-footer-note-2");
      if (footer2Label) {
        footer2Label.childNodes[0].nodeValue = tBase.footer2 + " ";
      }

      // Donate modal
      setText("t-donate-title", "donateTitle");
      setText("t-donate-text-main", "donateTextMain");
      setText("t-donate-boosty", "donateBoosty");
      setText("t-donate-kofi", "donateKofi");
      setText("t-donate-small", "donateSmall");

      // How it works
      setText("t-how-title", "howTitle");
      setText("t-how-p1", "howP1");
      setText("t-how-p2", "howP2");
      setText("t-how-sub-geo", "howSubGeo");
      setText("t-how-geo-1", "howGeo1");
      setText("t-how-geo-2", "howGeo2");
      setText("t-how-geo-3", "howGeo3");
      setText("t-how-sub-refresh", "howSubRefresh");
      setText("t-how-ref-1", "howRef1");
      setText("t-how-ref-2", "howRef2");
      setText("t-how-sub-online", "howSubOnline");
      setText("t-how-on-1", "howOn1");
      setText("t-how-on-2", "howOn2");
      setText("t-how-small", "howSmall");

      // Safety
      setText("t-safety-modal-title", "safetyModalTitle");
      setText("t-safety-now", "safetyNow");
      setText("t-safety-now-1", "safetyNow1");
      setText("t-safety-now-2", "safetyNow2");
      setText("t-safety-now-3", "safetyNow3");
      setText("t-safety-now-4", "safetyNow4");
      setText("t-safety-after", "safetyAfter");
      setText("t-safety-after-1", "safetyAfter1");
      setText("t-safety-after-2", "safetyAfter2");
      setText("t-safety-after-3", "safetyAfter3");
      setText("t-safety-home", "safetyHome");
      setText("t-safety-home-1", "safetyHome1");
      setText("t-safety-home-2", "safetyHome2");
      setText("t-safety-home-3", "safetyHome3");
      setText("t-safety-out", "safetyOut");
      setText("t-safety-out-1", "safetyOut1");
      setText("t-safety-out-2", "safetyOut2");
      setText("t-safety-small", "safetySmall");

      const cityInput = document.getElementById("cityInput");
      if (cityInput) {
        cityInput.placeholder = tBase.cityPlaceholder;
      }
      const geoStatus = document.getElementById("geoStatus");
      if (geoStatus && geoStatus.dataset.mode === "searching") {
        geoStatus.textContent = tBase.geoSearching;
      }
    }

    function switchLang(langCode) {
      let target = langCode;
      if (!translations[target]) {
        target = "en";
      }
      currentLang = target;

      document
        .querySelectorAll(".lang-btn")
        .forEach(btn => {
          btn.classList.toggle(
            "active",
            btn.dataset.lang === langCode
          );
        });

      applyTranslations();
      if (lastEarthquakes && lastEarthquakes.length) {
        renderAllBlocks(lastEarthquakes);
      }
    }

    // City loading
    async function loadCities() {
      try {
        const resLocal = await fetch(CITIES_LOCAL, {
          cache: "no-store"
        });
        if (resLocal.ok) {
          const data = await resLocal.json();
          return data;
        }
        throw new Error("local not ok");
      } catch (e) {
        console.warn("Local cities.json failed, trying fallback:", e);
        try {
          const resRemote = await fetch(CITIES_FALLBACK, {
            cache: "no-store"
          });
          if (!resRemote.ok) throw new Error("fallback not ok");
          const data = await resRemote.json();
          return data;
        } catch (e2) {
          console.error("Could not load cities.json", e2);
          const cityError = document.getElementById("cityError");
          if (cityError) cityError.style.display = "flex";
          return [];
        }
      }
    }

    function fillCityList() {
      const dl = document.getElementById("cityList");
      if (!dl) return;
      dl.innerHTML = "";
      citiesIndex.forEach(city => {
        const opt = document.createElement("option");
        opt.value = `${city.name}, ${city.country}`;
        dl.appendChild(opt);
      });
    }

    function findCityByLabel(label) {
      if (!label) return null;
      const lower = label.toLowerCase();
      return (
        citiesIndex.find(
          c =>
            `${c.name}, ${c.country}`
              .toLowerCase()
              .trim() === lower.trim()
        ) ||
        citiesIndex.find(c =>
          c.name.toLowerCase().startsWith(lower)
        )
      );
    }

    function haversineKm(lat1, lon1, lat2, lon2) {
      const R = 6371;
      const dLat = ((lat2 - lat1) * Math.PI) / 180;
      const dLon = ((lon2 - lon1) * Math.PI) / 180;
      const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos((lat1 * Math.PI) / 180) *
          Math.cos((lat2 * Math.PI) / 180) *
          Math.sin(dLon / 2) *
          Math.sin(dLon / 2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      return Math.round(R * c);
    }

    function formatTimeAgo(ts) {
      const tBase =
        translations[currentLang] || translations["en"];
      const now = Date.now();
      const diffMs = now - ts;
      const diffMin = Math.floor(diffMs / 60000);
      if (diffMin <= 1) return tBase.timeJustNow;
      if (diffMin < 60) return tBase.timeMinutesAgo(diffMin);
      const diffH = Math.floor(diffMin / 60);
      if (diffH < 24) return tBase.timeHoursAgo(diffH);
      const diffD = Math.floor(diffH / 24);
      return tBase.timeDaysAgo(diffD);
    }

    function formatDateTime(ts) {
      const d = new Date(ts);
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      const hh = String(d.getHours()).padStart(2, "0");
      const mm = String(d.getMinutes()).padStart(2, "0");
      const ss = String(d.getSeconds()).padStart(2, "0");
      return `${day}.${m}.${y}, ${hh}:${mm}:${ss}`;
    }

    function magLevel(mag) {
      if (mag >= 6) return "danger";
      if (mag >= 5) return "warn";
      if (mag >= 4) return "safe";
      return "safe";
    }

    function createEventCard(event) {
      const tBase =
        translations[currentLang] || translations["en"];
      const wrapper = document.createElement("div");
      wrapper.className = "event-card";

      const strip = document.createElement("div");
      strip.className = "event-strip";
      const lvl = magLevel(event.mag || 0);
      if (lvl === "warn") strip.classList.add("warn");
      if (lvl === "danger") strip.classList.add("danger");
      wrapper.appendChild(strip);

      const main = document.createElement("div");
      main.className = "event-main";

      const headerLine = document.createElement("div");
      headerLine.className = "event-header-line";

      const timeAgo = document.createElement("div");
      timeAgo.className = "event-timeago";
      timeAgo.textContent = formatTimeAgo(event.time);

      const magLine = document.createElement("div");
      magLine.className = "event-mag";
      magLine.textContent = tBase.magLabel(
        typeof event.mag === "number"
          ? event.mag.toFixed(1)
          : event.mag
      );

      headerLine.appendChild(timeAgo);
      headerLine.appendChild(magLine);

      const secondLine = document.createElement("div");
      secondLine.className = "event-second-line";
      const dist = event.distanceKm ?? "?";
      const depth = event.depthKm ?? "?";
      secondLine.textContent = tBase.distDepth(dist, depth);

      const thirdLine = document.createElement("div");
      thirdLine.className = "event-third-line";
      thirdLine.textContent = tBase.regionLabel(
        event.place || "‚Äî"
      );

      const fourthLine = document.createElement("div");
      fourthLine.className = "event-fourth-line";
      fourthLine.textContent = tBase.dateTimeLabel(
        formatDateTime(event.time)
      );

      main.appendChild(headerLine);
      main.appendChild(secondLine);
      main.appendChild(thirdLine);
      main.appendChild(fourthLine);

      wrapper.appendChild(main);
      return wrapper;
    }

    function renderSection(listId, events) {
      const tBase =
        translations[currentLang] || translations["en"];
      const container = document.getElementById(listId);
      if (!container) return;
      container.innerHTML = "";

      if (!events || !events.length) {
        const empty = document.createElement("div");
        empty.className = "empty-text";
        if (listId.startsWith("listNear")) {
          empty.textContent = tBase.noEventsNearby;
        } else {
          empty.textContent = "‚Äî";
        }
        container.appendChild(empty);
        return;
      }

      events.forEach(ev => {
        container.appendChild(createEventCard(ev));
      });
    }

    function renderLastSignificant(event) {
      const tBase =
        translations[currentLang] || translations["en"];
      const wrapper = document.getElementById(
        "lastSignificantWrapper"
      );
      if (!wrapper) return;
      if (!event) {
        wrapper.style.display = "none";
        return;
      }
      wrapper.style.display = "block";

      const badge = document.getElementById(
        "lastSignificantMagBadge"
      );
      badge.textContent = tBase.magLabel(
        typeof event.mag === "number"
          ? event.mag.toFixed(1)
          : event.mag
      );

      document.getElementById(
        "lastSignificantTimeago"
      ).textContent = formatTimeAgo(event.time);

      const dist = event.distanceKm ?? "?";
      const depth = event.depthKm ?? "?";
      document.getElementById(
        "lastSignificantSecond"
      ).textContent = tBase.distDepth(dist, depth);

      document.getElementById(
        "lastSignificantThird"
      ).textContent = tBase.regionLabel(
        event.place || "‚Äî"
      );

      document.getElementById(
        "lastSignificantFourth"
      ).textContent = tBase.dateTimeLabel(
        formatDateTime(event.time)
      );
    }

    function renderAllBlocks(events) {
      if (!events || !events.length) {
        renderSection("listNearHour", []);
        renderSection("listNearDay", []);
        renderSection("listNearWeek", []);
        renderSection("listWorldStrong", []);
        renderLastSignificant(null);
        return;
      }

      const now = Date.now();
      const oneHour = 60 * 60000;
      const oneDay = 24 * oneHour;
      const oneWeek = 7 * oneDay;
      const NEAR_RADIUS = 2000;

      const nearby = events.filter(
        e => e.distanceKm != null && e.distanceKm <= NEAR_RADIUS
      );

      const nearHour = [];
      const nearDay = [];
      const nearWeek = [];
      const usedIds = new Set();

      for (const ev of nearby) {
        const dt = now - ev.time;
        if (
          dt <= oneHour &&
          nearHour.length < 5
        ) {
          nearHour.push(ev);
          usedIds.add(ev.id);
        }
      }

      for (const ev of nearby) {
        const dt = now - ev.time;
        if (
          dt > oneHour &&
          dt <= oneDay &&
          nearDay.length < 5 &&
          !usedIds.has(ev.id)
        ) {
          nearDay.push(ev);
          usedIds.add(ev.id);
        }
      }

      for (const ev of nearby) {
        const dt = now - ev.time;
        if (
          dt > oneDay &&
          dt <= oneWeek &&
          nearWeek.length < 5 &&
          !usedIds.has(ev.id)
        ) {
          nearWeek.push(ev);
          usedIds.add(ev.id);
        }
      }

      const worldStrong = events
        .filter(e => {
          const dt = now - e.time;
          return dt <= oneDay && e.mag >= 5.5;
        })
        .slice(0, 5);

      renderSection("listNearHour", nearHour);
      renderSection("listNearDay", nearDay);
      renderSection("listNearWeek", nearWeek);
      renderSection("listWorldStrong", worldStrong);

      let candidates = [...nearHour, ...nearDay];
      if (!candidates.length) {
        candidates = worldStrong;
      }
      if (candidates.length) {
        candidates.sort((a, b) => b.mag - a.mag);
        renderLastSignificant(candidates[0]);
      } else {
        renderLastSignificant(null);
      }
    }

    async function fetchEarthquakes() {
      const tBase =
        translations[currentLang] || translations["en"];
      const updatedLabel = document.getElementById(
        "lastUpdated"
      );
      const geoStatus = document.getElementById("geoStatus");
      if (updatedLabel) {
        updatedLabel.innerHTML =
          '<span class="spinner"></span>';
      }

      const FEED =
        "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson";

      try {
        const res = await fetch(FEED, {
          cache: "no-store"
        });
        const data = await res.json();
        const feats = data.features || [];

        const mapped = feats
          .map(f => {
            const props = f.properties || {};
            const geom = f.geometry || {};
            const coords = geom.coordinates || [];
            const time = props.time;
            const mag = props.mag;
            const place = props.place || "";
            if (!time || typeof mag !== "number") return null;
            const depthKm =
              typeof coords[2] === "number"
                ? Math.round(coords[2])
                : null;
            let distanceKm = null;
            if (
              userLocation &&
              typeof coords[1] === "number" &&
              typeof coords[0] === "number"
            ) {
              distanceKm = haversineKm(
                userLocation.lat,
                userLocation.lon,
                coords[1],
                coords[0]
              );
            }
            return {
              id: f.id || `${time}-${mag}-${place}`,
              time,
              mag,
              place,
              depthKm,
              distanceKm
            };
          })
          .filter(Boolean)
          .sort((a, b) => b.time - a.time);

        lastEarthquakes = mapped;
        renderAllBlocks(mapped);

        if (updatedLabel) {
          updatedLabel.textContent = formatDateTime(
            Date.now()
          );
        }
        if (geoStatus && !geoStatus.textContent) {
          geoStatus.textContent = "";
        }
      } catch (e) {
        console.error("Error fetching quakes:", e);
        if (updatedLabel) {
          updatedLabel.textContent =
            tBase.loading;
        }
      }
    }

    function startAutoRefresh() {
      if (autoRefreshTimer) {
        clearInterval(autoRefreshTimer);
      }
      const intervalActive = 30 * 1000;
      const intervalHidden = 5 * 60 * 1000;

      function setup() {
        if (document.visibilityState === "visible") {
          autoRefreshTimer = setInterval(
            fetchEarthquakes,
            intervalActive
          );
        } else {
          autoRefreshTimer = setInterval(
            fetchEarthquakes,
            intervalHidden
          );
        }
      }
      setup();

      document.addEventListener(
        "visibilitychange",
        () => {
          if (autoRefreshTimer) {
            clearInterval(autoRefreshTimer);
          }
          setup();
        }
      );
    }

    function openModal(id) {
      const el = document.getElementById(id);
      if (el) {
        el.style.display = "flex";
      }
    }

    function closeModal(id) {
      const el = document.getElementById(id);
      if (el) {
        el.style.display = "none";
      }
    }

    function initModals() {
      document
        .querySelectorAll(".modal-close")
        .forEach(btn => {
          btn.addEventListener("click", () => {
            const target =
              btn.getAttribute("data-close");
            if (target) closeModal(target);
          });
        });

      [
        "modalDonateBackdrop",
        "modalHowBackdrop",
        "modalSafetyBackdrop"
      ].forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.addEventListener("click", e => {
          if (e.target === el) {
            el.style.display = "none";
          }
        });
      });
    }

    function initPWA() {
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("./service-worker.js")
          .catch(err =>
            console.warn("SW registration failed", err)
          );
      }

      window.addEventListener(
        "beforeinstallprompt",
        e => {
          e.preventDefault();
          deferredInstallPrompt = e;
        }
      );
    }

    function handleInstallClick() {
      const tBase =
        translations[currentLang] || translations["en"];
      if (deferredInstallPrompt) {
        deferredInstallPrompt.prompt();
        deferredInstallPrompt.userChoice.finally(() => {
          deferredInstallPrompt = null;
        });
      } else {
        alert(
          currentLang === "ru"
            ? "–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω¬ª."
            : currentLang === "kk"
            ? "“ö–æ–ª–¥–∞–Ω–±–∞–Ω—ã –±–∞—Å—Ç—ã —ç–∫—Ä–∞–Ω“ì–∞ “õ–æ—Å—É “Ø—à—ñ–Ω –±—Ä–∞—É–∑–µ—Ä–¥–µ–≥—ñ ¬´–ë–∞—Å—Ç—ã —ç–∫—Ä–∞–Ω“ì–∞ “õ–æ—Å—É¬ª —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑."
            : "To add the app to your home screen, use your browser's ‚ÄúAdd to Home screen‚Äù option."
        );
      }
    }

    function detectInitialLang() {
      const navLang =
        navigator.language ||
        navigator.userLanguage ||
        "en";
      const lower = navLang.toLowerCase();
      if (lower.startsWith("ru")) return "ru";
      if (lower.startsWith("kk") || lower.startsWith("kz"))
        return "kk";
      if (lower.startsWith("fr")) return "fr";
      if (lower.startsWith("zh")) return "zh";
      return "en";
    }

    async function initLocation() {
      const tBase =
        translations[currentLang] || translations["en"];
      const geoStatus = document.getElementById(
        "geoStatus"
      );
      const regionEl = document.getElementById(
        "currentRegion"
      );
      if (geoStatus) {
        geoStatus.dataset.mode = "searching";
        geoStatus.textContent = tBase.geoSearching;
      }

      function setRegionFromNearestCity(lat, lon) {
        userLocation = { lat, lon };
        let regionLabel =
          "Lat " +
          lat.toFixed(2) +
          ", Lon " +
          lon.toFixed(2);
        if (citiesIndex && citiesIndex.length) {
          let best = null;
          let bestDist = Infinity;
          citiesIndex.forEach(c => {
            const d = haversineKm(
              lat,
              lon,
              c.lat,
              c.lon
            );
            if (d < bestDist) {
              bestDist = d;
              best = c;
            }
          });
          if (best) {
            regionLabel = `${best.name}, ${best.country}`;
          }
        }
        if (regionEl) {
          regionEl.textContent = regionLabel;
        }
      }

      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
          pos => {
            const { latitude, longitude } =
              pos.coords;
            setRegionFromNearestCity(
              latitude,
              longitude
            );
            if (geoStatus) {
              geoStatus.textContent = "";
              delete geoStatus.dataset.mode;
            }
            fetchEarthquakes();
          },
          err => {
            console.warn(
              "Geolocation error:",
              err
            );
            if (geoStatus) {
              geoStatus.textContent =
                tBase.geoDenied;
              delete geoStatus.dataset.mode;
            }
            userLocation = null;
            fetchEarthquakes();
          },
          {
            enableHighAccuracy: false,
            timeout: 8000,
            maximumAge: 300000
          }
        );
      } else {
        if (geoStatus) {
          geoStatus.textContent =
            tBase.geoDenied;
          delete geoStatus.dataset.mode;
        }
        userLocation = null;
        fetchEarthquakes();
      }
    }

    function initUIEvents() {
      document
        .querySelectorAll(".lang-btn")
        .forEach(btn => {
          btn.addEventListener("click", () => {
            switchLang(btn.dataset.lang);
          });
        });

      const btnRefresh =
        document.getElementById("btnRefresh");
      if (btnRefresh) {
        btnRefresh.addEventListener(
          "click",
          fetchEarthquakes
        );
      }

      const btnInstall =
        document.getElementById("btnInstall");
      if (btnInstall) {
        btnInstall.addEventListener(
          "click",
          handleInstallClick
        );
      }

      const btnDonate =
        document.getElementById("btnDonate");
      if (btnDonate) {
        btnDonate.addEventListener("click", () =>
          openModal("modalDonateBackdrop")
        );
      }

      const btnHow =
        document.getElementById("btnHow");
      if (btnHow) {
        btnHow.addEventListener("click", () =>
          openModal("modalHowBackdrop")
        );
      }

      const btnSafety =
        document.getElementById("btnSafety");
      if (btnSafety) {
        btnSafety.addEventListener("click", () =>
          openModal("modalSafetyBackdrop")
        );
      }

      const btnBoosty =
        document.getElementById("btnBoosty");
      if (btnBoosty) {
        btnBoosty.addEventListener("click", () => {
          window.open(
            "https://boosty.to/zhanat-arch",
            "_blank",
            "noopener"
          );
        });
      }

      const btnKofi =
        document.getElementById("btnKofi");
      if (btnKofi) {
        btnKofi.addEventListener("click", () => {
          window.open(
            "https://ko-fi.com/zhanat_arch",
            "_blank",
            "noopener"
          );
        });
      }

      const btnOpenOnline =
        document.getElementById("btnOpenOnline");
      if (btnOpenOnline) {
        btnOpenOnline.addEventListener(
          "click",
          () => {
            window.open(ONLINE_URL, "_blank");
          }
        );
      }

      const btnCityArrow =
        document.getElementById("btnCityErrorArrow");
      if (btnCityArrow) {
        btnCityArrow.addEventListener(
          "click",
          () => {
            window.open(ONLINE_URL, "_blank");
          }
        );
      }

      const cityInput =
        document.getElementById("cityInput");
      if (cityInput) {
        cityInput.addEventListener(
          "change",
          () => {
            const city = findCityByLabel(
              cityInput.value
            );
            if (city) {
              userLocation = {
                lat: city.lat,
                lon: city.lon
              };
              const regionEl =
                document.getElementById(
                  "currentRegion"
                );
              if (regionEl) {
                regionEl.textContent = `${city.name}, ${city.country}`;
              }
              if (lastEarthquakes.length) {
                renderAllBlocks(lastEarthquakes);
              } else {
                fetchEarthquakes();
              }
            }
          }
        );
      }

      const btnUseLocation =
        document.getElementById("btnUseLocation");
      if (btnUseLocation) {
        btnUseLocation.addEventListener(
          "click",
          initLocation
        );
      }
    }

    (async function main() {
      currentLang = detectInitialLang();
      if (!translations[currentLang]) {
        currentLang = "en";
      }
      applyTranslations();

      const langBtn = document.querySelector(
        `.lang-btn[data-lang="${currentLang}"]`
      );
      if (langBtn) {
        document
          .querySelectorAll(".lang-btn")
          .forEach(btn =>
            btn.classList.toggle(
              "active",
              btn === langBtn
            )
          );
      }

      citiesIndex = await loadCities();
      fillCityList();

      initUIEvents();
      initModals();
      initPWA();
      initLocation();
      startAutoRefresh();
    })();
  </script>
</body>
</html>
